<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>resize失败原因调查 | 后端云</title>
  <meta name="keywords" content=" Nova ">
  <meta name="description" content="resize失败原因调查 | 后端云">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="penstack linux kernel NFV OPNFV MANO OPEN-O 虚拟机 容器 裸机 微服务 lambda计算 kubernetes 异构计算 人工智能">
<meta property="og:type" content="website">
<meta property="og:title" content="categories">
<meta property="og:url" content="https://www.backendcloud.cn/categories/index.html">
<meta property="og:site_name" content="后端云">
<meta property="og:description" content="penstack linux kernel NFV OPNFV MANO OPEN-O 虚拟机 容器 裸机 微服务 lambda计算 kubernetes 异构计算 人工智能">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2017-01-27T22:06:06.000Z">
<meta property="article:modified_time" content="2022-04-02T00:42:52.642Z">
<meta property="article:author" content="后端云">
<meta property="article:tag" content="penstack linux kernel NFV OPNFV MANO OPEN-O 虚拟机 容器 裸机 微服务 lambda计算 kubernetes 异构计算 人工智能">
<meta name="twitter:card" content="summary">


<link rel="icon" href="/img/avatar.jpg">

<link href="/css/style.css?v=1.1.0" rel="stylesheet">

<link href="/css/hl_theme/zenbum.css?v=1.1.0" rel="stylesheet">

<link href="//cdn.jsdelivr.net/npm/animate.css@4.1.0/animate.min.css" rel="stylesheet">

<script src="//cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="/js/titleTip.js?v=1.1.0" ></script>

<script src="//cdn.jsdelivr.net/npm/highlightjs@9.16.2/highlight.pack.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js"></script>



<script src="//cdn.jsdelivr.net/npm/jquery.cookie@1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.1.0" ></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?2858b2d509d28416712739c9a6a31204";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
<meta name="generator" content="Hexo 5.2.0"></head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="">
  <input class="theme_blog_path" value="">
  <input id="theme_shortcut" value="true" />
  <input id="theme_highlight_on" value="true" />
  <input id="theme_code_copy" value="true" />
</div>



<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/" class="avatar_target">
    <img class="avatar" src="/img/avatar.jpg" />
</a>
<div class="author">
    <span>后端云</span>
</div>

<div class="icon">
    
</div>




<ul>
    <li><div class="all active" data-rel="全部文章">全部文章<small>(108)</small></div></li>
    
        
            
            <li><div data-rel="边缘云">边缘云<small>(3)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="动态">动态<small>(1)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="基础篇">基础篇<small>(2)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="敏捷">敏捷<small>(3)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="生活">生活<small>(1)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="业界">业界<small>(6)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="云原生">云原生<small>(14)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="智能云">智能云<small>(5)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="自动化">自动化<small>(2)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="Collectd">Collectd<small>(1)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="Java">Java<small>(3)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="NFV">NFV<small>(16)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="Openstack_dev">Openstack_dev<small>(6)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="Openstack_op">Openstack_op<small>(29)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="Python">Python<small>(1)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="Tools">Tools<small>(14)</small></div>
                
            </li>
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
    
    
    
    
    </div>
    <div></div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="108">

<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        友情链接
        <i class="iconfont icon-left"></i>
    </div>
    <div class="friends-content">
        <ul>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <div class="right-top">
        <div id="default-panel">
            <i class="iconfont icon-search" data-title="搜索 快捷键 i"></i>
            <div class="right-title">全部文章</div>
            <i class="iconfont icon-file-tree" data-title="切换到大纲视图 快捷键 w"></i>
        </div>
        <div id="search-panel">
            <i class="iconfont icon-left" data-title="返回"></i>
            <input id="local-search-input" />
            <label class="border-line" for="input"></label>
            <i class="iconfont icon-case-sensitive" data-title="大小写敏感"></i>
            <i class="iconfont icon-tag" data-title="标签"></i>
        </div>
        <div id="outline-panel" style="display: none">
            <div class="right-title">大纲</div>
            <i class="iconfont icon-list" data-title="切换到文章列表"></i>
        </div>
    </div>

    <div class="tags-list">
    <input id="tag-search" />
    <div class="tag-wrapper">
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>4G</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>5G</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>安装</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>边缘计算</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>边缘云</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>参与</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>插件</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>产业趋势</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>产业需求</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>成熟</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>持续集成</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>存储</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>多级跳转</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>孵化</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>工具</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>管理体制</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>广告</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>归档</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>华为</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>会员</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>会员制</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>集成</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>脚本</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>开发</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>开源</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>美国</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>目标</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>内存</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>配置</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>破解</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>热迁移</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>日本</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>上游关系</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>生命周期</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>生态</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>隧道</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>提案</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>效率</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>印象笔记国内版</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>源码分析</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>云硬盘</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>云原生</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>运营商</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>中心云</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>转发</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>自动化测试</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>子项目</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>aggregation</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>AI</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ansible</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>API</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>async</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>available zone</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Board</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>bug</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Bug</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Capability</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>CentOS7.7</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>centos8</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>CI/CD</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Collectd</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>CPU</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>cpu-pinning</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>cpu绑定</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>cpu核绑定</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Cyborg</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>devops</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>docker</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Doctor</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>DSL</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ETSI</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>evacuate</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Fluentd</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>FPGA</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Game</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>gerrit</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>git</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>git flow</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Github Action</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>goland</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>google</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Gossip</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>GPU</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>HA</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>hosts</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>https</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Huge Page</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Idea</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ideaIU</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>InfluxDB</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Intel Clear Container</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>iperf3</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Java</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>JDK</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>jenkins</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>jetbrains</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>JIRA</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>K3S</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>k8s</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>K8S</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Kata Containers</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>KSM</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>kubeconfig</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>KubeEdge</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Kubernetes</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Kubernetes API</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Load Balance</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>LVS</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>masakari</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Masakari</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>NB-IoT</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Notion</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Nova</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>nova-scheduler</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>noVNC</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>numa</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>NUMA</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Ocata</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>OOMkilled</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Openstack</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Openstack Ocata</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Openstack Pike</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>openstack token管理</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>OpenYurt</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>OPNFV Prediction</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>ovs</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>parameter</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>passthrough</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>PCI</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Pike</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>placement</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>PLG</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Pod</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>POWER</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>privileged</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Prometheus</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>pycharm</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>PyCharm</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Python</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>qemu</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>QQ</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Raft</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>RAID</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>React</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Region</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>RT</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>selinux</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>serverless</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Serverless</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Serverwalker</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Service</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>spring-boot</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>SR-IOV</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>sriov</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Stein</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Switch</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>SYS_TIME</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>systemd</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>template</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Tools</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>TSC</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>tunnel</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Typora</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>vdbench</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>vim</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>Vitrage</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>VM HA</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>vnc</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>VNFD</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>WebStorm</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>widget</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>windows</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>xshell</a>
            </li>
        
            <li class="article-tag-list-item">
                <i class="iconfont icon-tag"></i><a>yum</a>
            </li>
        
    </div>

</div>

    
    <nav id="title-list-nav">
        
        <a  class="全部文章 Java "
           href="/2022/03/25/spring-boot-async-demo/"
           data-tag="spring-boot,async"
           data-author="" >
            <span class="post-title" title="spring-boot异步的example">spring-boot异步的example</span>
            <span class="post-date" title="2022-03-25 11:24:27">2022/03/25</span>
        </a>
        
        <a  class="全部文章 Tools "
           href="/2022/02/25/github-action-demo/"
           data-tag="CI/CD,Github Action,React"
           data-author="" >
            <span class="post-title" title="试用Github Action CI/CD流程（创建一个React项目，并打包部署）">试用Github Action CI/CD流程（创建一个React项目，并打包部署）</span>
            <span class="post-date" title="2022-02-25 11:54:20">2022/02/25</span>
        </a>
        
        <a  class="全部文章 Tools "
           href="/2022/01/06/notion-widget/"
           data-tag="Notion,widget"
           data-author="" >
            <span class="post-title" title="Notion的页面插入小控件Widget">Notion的页面插入小控件Widget</span>
            <span class="post-date" title="2022-01-06 11:06:12">2022/01/06</span>
        </a>
        
        <a  class="全部文章 Tools "
           href="/2022/01/06/notion/"
           data-tag="Notion,印象笔记国内版"
           data-author="" >
            <span class="post-title" title="Notion笔记和印象笔记同时使用的分工">Notion笔记和印象笔记同时使用的分工</span>
            <span class="post-date" title="2022-01-06 10:28:42">2022/01/06</span>
        </a>
        
        <a  class="全部文章 生活 "
           href="/2022/01/06/switch/"
           data-tag="Switch,Game"
           data-author="" >
            <span class="post-title" title="Switch游戏推荐">Switch游戏推荐</span>
            <span class="post-date" title="2022-01-06 09:58:49">2022/01/06</span>
        </a>
        
        <a  class="全部文章 Tools "
           href="/2021/12/16/idea-plugin/"
           data-tag="Idea,插件"
           data-author="" >
            <span class="post-title" title="Idea 插件推荐">Idea 插件推荐</span>
            <span class="post-date" title="2021-12-16 17:48:09">2021/12/16</span>
        </a>
        
        <a  class="全部文章 云原生 "
           href="/2021/12/01/PLG/"
           data-tag="Kubernetes,Pod,PLG"
           data-author="" >
            <span class="post-title" title="PLG 实现 Kubernetes Pod 日志收集和展示">PLG 实现 Kubernetes Pod 日志收集和展示</span>
            <span class="post-date" title="2021-12-01 17:48:46">2021/12/01</span>
        </a>
        
        <a  class="全部文章 云原生 "
           href="/2021/11/30/pod-log-collect/"
           data-tag="Kubernetes,Pod,Fluentd"
           data-author="" >
            <span class="post-title" title="Fluentd 实现 Kubernetes Pod 日志收集">Fluentd 实现 Kubernetes Pod 日志收集</span>
            <span class="post-date" title="2021-11-30 16:36:50">2021/11/30</span>
        </a>
        
        <a  class="全部文章 Java "
           href="/2021/11/23/java-memo/"
           data-tag="Java"
           data-author="" >
            <span class="post-title" title="Java项目开发中的点滴记录（1）">Java项目开发中的点滴记录（1）</span>
            <span class="post-date" title="2021-11-23 15:04:04">2021/11/23</span>
        </a>
        
        <a  class="全部文章 Java "
           href="/2021/11/23/jdkbug/"
           data-tag="JDK,bug"
           data-author="" >
            <span class="post-title" title="JDK bug - Encrypt Private Key failed  unrecognized algorithm name  PBEWithSHA1AndDESede">JDK bug - Encrypt Private Key failed  unrecognized algorithm name  PBEWithSHA1AndDESede</span>
            <span class="post-date" title="2021-11-23 14:22:24">2021/11/23</span>
        </a>
        
        <a  class="全部文章 云原生 "
           href="/2021/09/28/kubernetes-api/"
           data-tag="边缘计算,Kubernetes API,云原生,中心云,边缘云"
           data-author="" >
            <span class="post-title" title="在产品开发中调用Kubernetes API接口遇到的几个问题">在产品开发中调用Kubernetes API接口遇到的几个问题</span>
            <span class="post-date" title="2021-09-28 17:25:28">2021/09/28</span>
        </a>
        
        <a  class="全部文章 Tools "
           href="/2021/09/26/git-flow/"
           data-tag="git flow,git"
           data-author="" >
            <span class="post-title" title="开始尝试使用git flow工作流">开始尝试使用git flow工作流</span>
            <span class="post-date" title="2021-09-26 15:32:59">2021/09/26</span>
        </a>
        
        <a  class="全部文章 Tools "
           href="/2021/09/15/typora-auto-numbering/"
           data-tag="Typora,Tools"
           data-author="" >
            <span class="post-title" title="Mac版Typora 标题自动编号">Mac版Typora 标题自动编号</span>
            <span class="post-date" title="2021-09-15 17:36:23">2021/09/15</span>
        </a>
        
        <a  class="全部文章 云原生 "
           href="/2021/09/13/create-kubeconfig/"
           data-tag="kubeconfig"
           data-author="" >
            <span class="post-title" title="云管平台创建资源池租户功能的实现">云管平台创建资源池租户功能的实现</span>
            <span class="post-date" title="2021-09-13 14:22:18">2021/09/13</span>
        </a>
        
        <a  class="全部文章 云原生 "
           href="/2021/08/10/kubernetes-iperf3-2/"
           data-tag="Kubernetes,iperf3,Service"
           data-author="" >
            <span class="post-title" title="iperf3测试Kubernetes Service的四层性能（下）">iperf3测试Kubernetes Service的四层性能（下）</span>
            <span class="post-date" title="2021-08-10 07:06:01">2021/08/10</span>
        </a>
        
        <a  class="全部文章 云原生 "
           href="/2021/08/09/kubernetes-iperf3/"
           data-tag="Kubernetes,iperf3,Service"
           data-author="" >
            <span class="post-title" title="iperf3测试Kubernetes Service的四层性能（上）">iperf3测试Kubernetes Service的四层性能（上）</span>
            <span class="post-date" title="2021-08-09 17:06:01">2021/08/09</span>
        </a>
        
        <a  class="全部文章 边缘云 "
           href="/2021/03/12/edge2021/"
           data-tag="serverless,边缘计算,5G,4G,NB-IoT,AI"
           data-author="" >
            <span class="post-title" title="边缘计算2021年展望">边缘计算2021年展望</span>
            <span class="post-date" title="2021-03-12 09:41:42">2021/03/12</span>
        </a>
        
        <a  class="全部文章 Tools "
           href="/2021/03/11/jetbrains-mac-m1/"
           data-tag="jetbrains,goland,ideaIU,pycharm,WebStorm,破解"
           data-author="" >
            <span class="post-title" title="jetbrains macbook m1版全家桶破解">jetbrains macbook m1版全家桶破解</span>
            <span class="post-date" title="2021-03-11 17:01:57">2021/03/11</span>
        </a>
        
        <a  class="全部文章 边缘云 "
           href="/2021/01/26/edge-think/"
           data-tag="serverless,边缘计算,FPGA,GPU"
           data-author="" >
            <span class="post-title" title="边缘计算的几点思考">边缘计算的几点思考</span>
            <span class="post-date" title="2021-01-26 17:11:34">2021/01/26</span>
        </a>
        
        <a  class="全部文章 边缘云 "
           href="/2021/01/21/kubernetes2edge/"
           data-tag="Kubernetes,K8S,K3S,OpenYurt,KubeEdge"
           data-author="" >
            <span class="post-title" title="K3S, OpenYurt, KubeEdge 主要差异">K3S, OpenYurt, KubeEdge 主要差异</span>
            <span class="post-date" title="2021-01-21 16:47:45">2021/01/21</span>
        </a>
        
        <a  class="全部文章 云原生 "
           href="/2020/05/27/k8s-op/"
           data-tag="k8s"
           data-author="" >
            <span class="post-title" title="k8s常用操作">k8s常用操作</span>
            <span class="post-date" title="2020-05-27 17:32:08">2020/05/27</span>
        </a>
        
        <a  class="全部文章 云原生 "
           href="/2020/05/22/k8s-cpubond/"
           data-tag="Kubernetes,k8s,cpu核绑定"
           data-author="" >
            <span class="post-title" title="k8s支持容器核绑定">k8s支持容器核绑定</span>
            <span class="post-date" title="2020-05-22 16:24:44">2020/05/22</span>
        </a>
        
        <a  class="全部文章 云原生 "
           href="/2020/05/22/k8s-capability/"
           data-tag="Kubernetes,k8s,Capability,SYS_TIME"
           data-author="" >
            <span class="post-title" title="k8s支持Capability机制">k8s支持Capability机制</span>
            <span class="post-date" title="2020-05-22 15:18:59">2020/05/22</span>
        </a>
        
        <a  class="全部文章 云原生 "
           href="/2020/05/22/pod-mem/"
           data-tag="Kubernetes,k8s,OOMkilled,privileged"
           data-author="" >
            <span class="post-title" title="k8s OOMkilled超出内存限制的容器">k8s OOMkilled超出内存限制的容器</span>
            <span class="post-date" title="2020-05-22 13:52:15">2020/05/22</span>
        </a>
        
        <a  class="全部文章 云原生 "
           href="/2020/04/16/centos7-7-k8s-3nodes-prometheus/"
           data-tag="CentOS7.7,k8s,Prometheus"
           data-author="" >
            <span class="post-title" title="CentOS7.7部署k8s + Prometheus（1 master + 2 node）">CentOS7.7部署k8s + Prometheus（1 master + 2 node）</span>
            <span class="post-date" title="2020-04-16 13:46:34">2020/04/16</span>
        </a>
        
        <a  class="全部文章 云原生 "
           href="/2020/04/13/centos7-7-k8s-7nodes/"
           data-tag="CentOS7.7,k8s"
           data-author="" >
            <span class="post-title" title="CentOS7.7部署k8s（3 master + 3 node + 1 client）">CentOS7.7部署k8s（3 master + 3 node + 1 client）</span>
            <span class="post-date" title="2020-04-13 13:46:34">2020/04/13</span>
        </a>
        
        <a  class="全部文章 云原生 "
           href="/2020/04/10/centos7-7-k8s-3nodes/"
           data-tag="CentOS7.7,k8s"
           data-author="" >
            <span class="post-title" title="CentOS7.7部署k8s（1 master + 2 node）">CentOS7.7部署k8s（1 master + 2 node）</span>
            <span class="post-date" title="2020-04-10 13:46:34">2020/04/10</span>
        </a>
        
        <a  class="全部文章 云原生 "
           href="/2020/03/16/centos8installdocker/"
           data-tag="docker,centos8"
           data-author="" >
            <span class="post-title" title="CentOS 8.0 安装docker 报错：Problem: package docker-ce-3:19.03.8-3.el7.x86_64 requires containerd.io &gt;= 1.2.2-3">CentOS 8.0 安装docker 报错：Problem: package docker-ce-3:19.03.8-3.el7.x86_64 requires containerd.io &gt;= 1.2.2-3</span>
            <span class="post-date" title="2020-03-16 16:04:21">2020/03/16</span>
        </a>
        
        <a  class="全部文章 Openstack_dev "
           href="/2020/01/09/masakari-task-code/"
           data-tag="VM HA,Openstack,Masakari,源码分析"
           data-author="" >
            <span class="post-title" title="Openstack Masakari task流程源码分析">Openstack Masakari task流程源码分析</span>
            <span class="post-date" title="2020-01-09 09:18:53">2020/01/09</span>
        </a>
        
        <a  class="全部文章 Openstack_op "
           href="/2020/01/01/openstackopmemo4/"
           data-tag="Openstack,devops"
           data-author="" >
            <span class="post-title" title="Openstack运维常见问题记录(4)">Openstack运维常见问题记录(4)</span>
            <span class="post-date" title="2020-01-01 20:28:32">2020/01/01</span>
        </a>
        
        <a  class="全部文章 Openstack_op "
           href="/2019/09/20/stein-deploy-problem/"
           data-tag="Stein"
           data-author="" >
            <span class="post-title" title="Openstack Stein 部署遇到的问题">Openstack Stein 部署遇到的问题</span>
            <span class="post-date" title="2019-09-20 18:49:06">2019/09/20</span>
        </a>
        
        <a  class="全部文章 Tools "
           href="/2019/08/28/jetbrains/"
           data-tag="jetbrains,goland,ideaIU,pycharm,WebStorm,破解"
           data-author="" >
            <span class="post-title" title="jetbrains windows版全家桶破解">jetbrains windows版全家桶破解</span>
            <span class="post-date" title="2019-08-28 15:15:39">2019/08/28</span>
        </a>
        
        <a  class="全部文章 Tools "
           href="/2019/08/27/tunnel/"
           data-tag="xshell,tunnel,隧道,工具"
           data-author="" >
            <span class="post-title" title="xshell隧道转发的三种类型">xshell隧道转发的三种类型</span>
            <span class="post-date" title="2019-08-27 15:25:01">2019/08/27</span>
        </a>
        
        <a  class="全部文章 业界 "
           href="/2019/06/15/huaweijpqa/"
           data-tag="华为,日本,美国"
           data-author="" >
            <span class="post-title" title="任正非5月18日接受日本媒体采访的中文纪要">任正非5月18日接受日本媒体采访的中文纪要</span>
            <span class="post-date" title="2019-06-15 13:02:34">2019/06/15</span>
        </a>
        
        <a  class="全部文章 业界 "
           href="/2019/05/21/huaweiyun/"
           data-tag="华为"
           data-author="" >
            <span class="post-title" title="华为云可能也要被美国釜底抽薪">华为云可能也要被美国釜底抽薪</span>
            <span class="post-date" title="2019-05-21 11:52:58">2019/05/21</span>
        </a>
        
        <a  class="全部文章 业界 "
           href="/2019/05/20/huaweivsa/"
           data-tag="华为"
           data-author="" >
            <span class="post-title" title="属于华为的荣耀时刻">属于华为的荣耀时刻</span>
            <span class="post-date" title="2019-05-20 18:28:25">2019/05/20</span>
        </a>
        
        <a  class="全部文章 Openstack_op "
           href="/2019/04/19/sriov2ovs/"
           data-tag="sriov,ovs,脚本"
           data-author="" >
            <span class="post-title" title="sriov计算节点转ovs计算节点脚本">sriov计算节点转ovs计算节点脚本</span>
            <span class="post-date" title="2019-04-19 16:50:16">2019/04/19</span>
        </a>
        
        <a  class="全部文章 Openstack_op "
           href="/2019/04/18/placement/"
           data-tag="placement"
           data-author="" >
            <span class="post-title" title="Openstack Placement">Openstack Placement</span>
            <span class="post-date" title="2019-04-18 09:14:54">2019/04/18</span>
        </a>
        
        <a  class="全部文章 Openstack_op "
           href="/2018/10/21/power/"
           data-tag="POWER"
           data-author="" >
            <span class="post-title" title="POWER架构服务器作为计算节点">POWER架构服务器作为计算节点</span>
            <span class="post-date" title="2018-10-21 16:21:52">2018/10/21</span>
        </a>
        
        <a  class="全部文章 Openstack_op "
           href="/2018/10/14/sriov/"
           data-tag="SR-IOV,passthrough"
           data-author="" >
            <span class="post-title" title="OpenStack实践SR-IOV计算节点">OpenStack实践SR-IOV计算节点</span>
            <span class="post-date" title="2018-10-14 05:15:24">2018/10/14</span>
        </a>
        
        <a  class="全部文章 Openstack_op "
           href="/2018/09/29/openstackopmemo3/"
           data-tag="Openstack,devops"
           data-author="" >
            <span class="post-title" title="Openstack运维常见问题记录(3)">Openstack运维常见问题记录(3)</span>
            <span class="post-date" title="2018-09-29 20:28:32">2018/09/29</span>
        </a>
        
        <a  class="全部文章 基础篇 "
           href="/2018/09/05/ceph/"
           data-tag="vdbench"
           data-author="" >
            <span class="post-title" title="ceph数据存储的几个概念">ceph数据存储的几个概念</span>
            <span class="post-date" title="2018-09-05 17:32:47">2018/09/05</span>
        </a>
        
        <a  class="全部文章 Openstack_op "
           href="/2018/08/28/openstackopmemo2/"
           data-tag="Openstack,devops"
           data-author="" >
            <span class="post-title" title="Openstack运维常见问题记录(2)">Openstack运维常见问题记录(2)</span>
            <span class="post-date" title="2018-08-28 14:48:42">2018/08/28</span>
        </a>
        
        <a  class="全部文章 Openstack_op "
           href="/2018/08/26/openstackopmemo/"
           data-tag="Openstack,devops"
           data-author="" >
            <span class="post-title" title="Openstack运维常见问题记录(1)">Openstack运维常见问题记录(1)</span>
            <span class="post-date" title="2018-08-26 18:38:42">2018/08/26</span>
        </a>
        
        <a  class="全部文章 Openstack_op "
           href="/2018/08/16/2concepts/"
           data-tag="aggregation,available zone,numa"
           data-author="" >
            <span class="post-title" title="Openstack两组容易混淆的概念">Openstack两组容易混淆的概念</span>
            <span class="post-date" title="2018-08-16 15:08:05">2018/08/16</span>
        </a>
        
        <a  class="全部文章 自动化 "
           href="/2018/07/14/serverwalker/"
           data-tag="Serverwalker,自动化测试,DSL"
           data-author="" >
            <span class="post-title" title="自动化测试工具Serverwalker介绍">自动化测试工具Serverwalker介绍</span>
            <span class="post-date" title="2018-07-14 11:52:51">2018/07/14</span>
        </a>
        
        <a  class="全部文章 Openstack_dev "
           href="/2018/07/13/cpupin/"
           data-tag="cpu绑定"
           data-author="" >
            <span class="post-title" title="Openstack中的虚拟机的cpu绑定">Openstack中的虚拟机的cpu绑定</span>
            <span class="post-date" title="2018-07-13 20:09:41">2018/07/13</span>
        </a>
        
        <a  class="全部文章 业界 "
           href="/2018/05/10/huawei/"
           data-tag="华为,运营商"
           data-author="" >
            <span class="post-title" title="华为的发展已越来越不需要运营商">华为的发展已越来越不需要运营商</span>
            <span class="post-date" title="2018-05-10 23:45:05">2018/05/10</span>
        </a>
        
        <a  class="全部文章 Openstack_op "
           href="/2018/04/14/pike-novnc/"
           data-tag="Pike,noVNC"
           data-author="" >
            <span class="post-title" title="OpenStack Pike dashboard noVNC 不能访问">OpenStack Pike dashboard noVNC 不能访问</span>
            <span class="post-date" title="2018-04-14 05:18:22">2018/04/14</span>
        </a>
        
        <a  class="全部文章 Tools "
           href="/2018/04/14/pycharm2018/"
           data-tag="PyCharm"
           data-author="" >
            <span class="post-title" title="JetBrains PyCharm 2018.1.1 x64专业版永久激活">JetBrains PyCharm 2018.1.1 x64专业版永久激活</span>
            <span class="post-date" title="2018-04-14 04:47:29">2018/04/14</span>
        </a>
        
        <a  class="全部文章 Openstack_op "
           href="/2018/04/14/vmsystemddel/"
           data-tag="selinux,qemu,systemd"
           data-author="" >
            <span class="post-title" title="vm被systemd删除">vm被systemd删除</span>
            <span class="post-date" title="2018-04-14 04:30:35">2018/04/14</span>
        </a>
        
        <a  class="全部文章 Openstack_op "
           href="/2018/04/14/vmcantstart/"
           data-tag="selinux"
           data-author="" >
            <span class="post-title" title="虚拟机无法启动">虚拟机无法启动</span>
            <span class="post-date" title="2018-04-14 03:15:39">2018/04/14</span>
        </a>
        
        <a  class="全部文章 NFV "
           href="/2018/01/23/rt-vm/"
           data-tag="RT"
           data-author="" >
            <span class="post-title" title="部署实时OpenStack实例">部署实时OpenStack实例</span>
            <span class="post-date" title="2018-01-23 16:28:28">2018/01/23</span>
        </a>
        
        <a  class="全部文章 Openstack_op "
           href="/2018/01/23/scheduler-win-linux/"
           data-tag="nova-scheduler"
           data-author="" >
            <span class="post-title" title="支持windows虚拟机和linux虚拟机分区调度">支持windows虚拟机和linux虚拟机分区调度</span>
            <span class="post-date" title="2018-01-23 14:40:11">2018/01/23</span>
        </a>
        
        <a  class="全部文章 Openstack_op "
           href="/2017/12/28/local-yum/"
           data-tag="yum"
           data-author="" >
            <span class="post-title" title="Openstack Pike本地yum源搭建">Openstack Pike本地yum源搭建</span>
            <span class="post-date" title="2017-12-28 22:20:40">2017/12/28</span>
        </a>
        
        <a  class="全部文章 Openstack_op "
           href="/2017/12/28/p7-4-shell/"
           data-tag="Openstack Pike,安装"
           data-author="" >
            <span class="post-title" title="脚本安装Openstack Pike">脚本安装Openstack Pike</span>
            <span class="post-date" title="2017-12-28 20:43:27">2017/12/28</span>
        </a>
        
        <a  class="全部文章 NFV "
           href="/2017/12/08/kata-containers/"
           data-tag="Kata Containers,Intel Clear Container,Serverless"
           data-author="" >
            <span class="post-title" title="Kata Containers">Kata Containers</span>
            <span class="post-date" title="2017-12-08 00:27:10">2017/12/08</span>
        </a>
        
        <a  class="全部文章 NFV "
           href="/2017/11/12/raft-gossip/"
           data-tag="Raft,Gossip"
           data-author="" >
            <span class="post-title" title="Raft算法和Gossip协议">Raft算法和Gossip协议</span>
            <span class="post-date" title="2017-11-12 12:34:11">2017/11/12</span>
        </a>
        
        <a  class="全部文章 Openstack_op "
           href="/2017/11/10/vitrage/"
           data-tag="Vitrage"
           data-author="" >
            <span class="post-title" title="Openstack Vitrage（根因分析）">Openstack Vitrage（根因分析）</span>
            <span class="post-date" title="2017-11-10 08:02:15">2017/11/10</span>
        </a>
        
        <a  class="全部文章 NFV "
           href="/2017/11/08/RTOS/"
           data-tag="RT"
           data-author="" >
            <span class="post-title" title="实时操作系统">实时操作系统</span>
            <span class="post-date" title="2017-11-08 15:13:56">2017/11/08</span>
        </a>
        
        <a  class="全部文章 基础篇 "
           href="/2017/08/01/raid/"
           data-tag="RAID"
           data-author="" >
            <span class="post-title" title="RAID">RAID</span>
            <span class="post-date" title="2017-08-01 08:42:40">2017/08/01</span>
        </a>
        
        <a  class="全部文章 Openstack_op "
           href="/2017/07/31/vm-cpu/"
           data-tag="Nova,CPU"
           data-author="" >
            <span class="post-title" title="云主机的指令集配置">云主机的指令集配置</span>
            <span class="post-date" title="2017-07-31 05:05:20">2017/07/31</span>
        </a>
        
        <a  class="全部文章 业界 "
           href="/2017/07/20/yunyingshang-kongjian/"
           data-tag="运营商"
           data-author="" >
            <span class="post-title" title="AI大环境下的运营商">AI大环境下的运营商</span>
            <span class="post-date" title="2017-07-20 18:51:01">2017/07/20</span>
        </a>
        
        <a  class="全部文章 NFV "
           href="/2017/07/20/cpu-pinning/"
           data-tag="cpu-pinning"
           data-author="" >
            <span class="post-title" title="cpu-pinning CPU绑定">cpu-pinning CPU绑定</span>
            <span class="post-date" title="2017-07-20 18:30:18">2017/07/20</span>
        </a>
        
        <a  class="全部文章 NFV "
           href="/2017/07/20/numa/"
           data-tag="NUMA"
           data-author="" >
            <span class="post-title" title="NUMA 非一致性内存访问">NUMA 非一致性内存访问</span>
            <span class="post-date" title="2017-07-20 17:47:16">2017/07/20</span>
        </a>
        
        <a  class="全部文章 NFV "
           href="/2017/07/19/vmem/"
           data-tag="KSM,Huge Page"
           data-author="" >
            <span class="post-title" title="内存虚拟化">内存虚拟化</span>
            <span class="post-date" title="2017-07-19 05:17:46">2017/07/19</span>
        </a>
        
        <a  class="全部文章 Openstack_op "
           href="/2017/07/04/resize-error/"
           data-tag="Nova"
           data-author="" >
            <span class="post-title" title="resize失败原因调查">resize失败原因调查</span>
            <span class="post-date" title="2017-07-04 10:20:06">2017/07/04</span>
        </a>
        
        <a  class="全部文章 Openstack_op "
           href="/2017/06/30/attach-yunyingpan/"
           data-tag="云硬盘"
           data-author="" >
            <span class="post-title" title="挂载云硬盘">挂载云硬盘</span>
            <span class="post-date" title="2017-06-30 05:16:38">2017/06/30</span>
        </a>
        
        <a  class="全部文章 Openstack_dev "
           href="/2017/06/28/ocata-nova-evacuate-bug/"
           data-tag="Nova,Ocata,Bug"
           data-author="" >
            <span class="post-title" title="Ocata nova evacuate bug">Ocata nova evacuate bug</span>
            <span class="post-date" title="2017-06-28 18:24:18">2017/06/28</span>
        </a>
        
        <a  class="全部文章 敏捷 "
           href="/2017/06/28/trigger-build/"
           data-tag="gerrit,jenkins,持续集成"
           data-author="" >
            <span class="post-title" title="gerrit触发jenkins执行脚本自动构建rpm包">gerrit触发jenkins执行脚本自动构建rpm包</span>
            <span class="post-date" title="2017-06-28 18:17:13">2017/06/28</span>
        </a>
        
        <a  class="全部文章 敏捷 "
           href="/2017/06/28/gerrit-install/"
           data-tag="gerrit"
           data-author="" >
            <span class="post-title" title="gerrit install">gerrit install</span>
            <span class="post-date" title="2017-06-28 15:51:07">2017/06/28</span>
        </a>
        
        <a  class="全部文章 敏捷 "
           href="/2017/06/27/jira-install/"
           data-tag="JIRA"
           data-author="" >
            <span class="post-title" title="JIRA安装">JIRA安装</span>
            <span class="post-date" title="2017-06-27 01:53:54">2017/06/27</span>
        </a>
        
        <a  class="全部文章 "
           href="/2017/06/22/compute-node-ha/"
           data-tag="HA,masakari"
           data-author="" >
            <span class="post-title" title="compute node ha 主流开源实现">compute node ha 主流开源实现</span>
            <span class="post-date" title="2017-06-22 09:16:48">2017/06/22</span>
        </a>
        
        <a  class="全部文章 Openstack_op "
           href="/2017/06/15/live-migration-fail/"
           data-tag="热迁移"
           data-author="" >
            <span class="post-title" title="热迁移失败总结">热迁移失败总结</span>
            <span class="post-date" title="2017-06-15 18:54:53">2017/06/15</span>
        </a>
        
        <a  class="全部文章 Collectd "
           href="/2017/06/15/collectd-influxdb/"
           data-tag="Collectd,InfluxDB"
           data-author="" >
            <span class="post-title" title="Collectd 和 InfluxDB 的部署和使用">Collectd 和 InfluxDB 的部署和使用</span>
            <span class="post-date" title="2017-06-15 06:47:53">2017/06/15</span>
        </a>
        
        <a  class="全部文章 Openstack_op "
           href="/2017/06/14/block-migrate/"
           data-tag="Nova,热迁移"
           data-author="" >
            <span class="post-title" title="本地存储条件下的热迁移">本地存储条件下的热迁移</span>
            <span class="post-date" title="2017-06-14 15:25:48">2017/06/14</span>
        </a>
        
        <a  class="全部文章 NFV "
           href="/2017/06/14/doctor/"
           data-tag="Doctor"
           data-author="" >
            <span class="post-title" title="Doctor framework">Doctor framework</span>
            <span class="post-date" title="2017-06-14 11:51:04">2017/06/14</span>
        </a>
        
        <a  class="全部文章 Openstack_dev "
           href="/2017/06/10/add-quick-evacuate/"
           data-tag="VM HA,Nova"
           data-author="" >
            <span class="post-title" title="将快速疏散功能加入VM HA程序中">将快速疏散功能加入VM HA程序中</span>
            <span class="post-date" title="2017-06-10 03:27:36">2017/06/10</span>
        </a>
        
        <a  class="全部文章 Openstack_dev "
           href="/2017/06/08/force-down/"
           data-tag="Nova,evacuate"
           data-author="" >
            <span class="post-title" title="新增OpenStack NOVA API用于强制计算节点nova-compute服务down">新增OpenStack NOVA API用于强制计算节点nova-compute服务down</span>
            <span class="post-date" title="2017-06-08 20:11:17">2017/06/08</span>
        </a>
        
        <a  class="全部文章 Openstack_op "
           href="/2017/06/07/storage-arch/"
           data-tag="存储"
           data-author="" >
            <span class="post-title" title="vm挂载卷，镜像，vm实例的共享存储架构">vm挂载卷，镜像，vm实例的共享存储架构</span>
            <span class="post-date" title="2017-06-07 08:20:29">2017/06/07</span>
        </a>
        
        <a  class="全部文章 动态 "
           href="/2017/05/06/https/"
           data-tag="https"
           data-author="" >
            <span class="post-title" title="后端云站全部采用https连接">后端云站全部采用https连接</span>
            <span class="post-date" title="2017-05-06 11:03:57">2017/05/06</span>
        </a>
        
        <a  class="全部文章 Openstack_op "
           href="/2017/05/04/win-register/"
           data-tag="windows"
           data-author="" >
            <span class="post-title" title="windows虚拟机激活失败问题">windows虚拟机激活失败问题</span>
            <span class="post-date" title="2017-05-04 22:21:24">2017/05/04</span>
        </a>
        
        <a  class="全部文章 自动化 "
           href="/2017/05/03/ansible/"
           data-tag="ansible"
           data-author="" >
            <span class="post-title" title="ansible简单使用">ansible简单使用</span>
            <span class="post-date" title="2017-05-03 07:55:42">2017/05/03</span>
        </a>
        
        <a  class="全部文章 智能云 "
           href="/2017/05/02/pci-api/"
           data-tag="PCI,API"
           data-author="" >
            <span class="post-title" title="pci-api support">pci-api support</span>
            <span class="post-date" title="2017-05-02 10:11:54">2017/05/02</span>
        </a>
        
        <a  class="全部文章 智能云 "
           href="/2017/05/01/cyborg-agent/"
           data-tag="Cyborg"
           data-author="" >
            <span class="post-title" title="cyborg agent">cyborg agent</span>
            <span class="post-date" title="2017-05-01 17:49:47">2017/05/01</span>
        </a>
        
        <a  class="全部文章 Openstack_op "
           href="/2017/05/01/vm-mem/"
           data-tag="内存"
           data-author="" >
            <span class="post-title" title="获取虚机内存">获取虚机内存</span>
            <span class="post-date" title="2017-05-01 14:27:38">2017/05/01</span>
        </a>
        
        <a  class="全部文章 智能云 "
           href="/2017/05/01/fpag-user-case/"
           data-tag="FPGA"
           data-author="" >
            <span class="post-title" title="FPGA用户用例提案">FPGA用户用例提案</span>
            <span class="post-date" title="2017-05-01 13:39:58">2017/05/01</span>
        </a>
        
        <a  class="全部文章 智能云 "
           href="/2017/04/29/gpu-config-rst/"
           data-tag="GPU,配置"
           data-author="" >
            <span class="post-title" title="云环境中GPU配置">云环境中GPU配置</span>
            <span class="post-date" title="2017-04-29 18:49:59">2017/04/29</span>
        </a>
        
        <a  class="全部文章 业界 "
           href="/2017/03/10/yunying-huawei/"
           data-tag="华为,运营商"
           data-author="" >
            <span class="post-title" title="华为和运营商们">华为和运营商们</span>
            <span class="post-date" title="2017-03-10 21:25:44">2017/03/10</span>
        </a>
        
        <a  class="全部文章 Tools "
           href="/2017/03/07/hosts-google/"
           data-tag="google,hosts"
           data-author="" >
            <span class="post-title" title="访问google">访问google</span>
            <span class="post-date" title="2017-03-07 01:14:05">2017/03/07</span>
        </a>
        
        <a  class="全部文章 Openstack_op "
           href="/2017/02/24/ocata-packstack/"
           data-tag="Openstack Ocata"
           data-author="" >
            <span class="post-title" title="Openstack Ocata初体验">Openstack Ocata初体验</span>
            <span class="post-date" title="2017-02-24 16:45:50">2017/02/24</span>
        </a>
        
        <a  class="全部文章 Tools "
           href="/2017/02/17/qq-ad/"
           data-tag="QQ,广告"
           data-author="" >
            <span class="post-title" title="去QQ广告">去QQ广告</span>
            <span class="post-date" title="2017-02-17 03:41:34">2017/02/17</span>
        </a>
        
        <a  class="全部文章 Openstack_op "
           href="/2017/02/08/glance-regiontwo2one/"
           data-tag="Region"
           data-author="" >
            <span class="post-title" title="openstack两个region分别用各自glance服务-&gt;共用glance服务">openstack两个region分别用各自glance服务-&gt;共用glance服务</span>
            <span class="post-date" title="2017-02-08 16:51:34">2017/02/08</span>
        </a>
        
        <a  class="全部文章 Python "
           href="/2017/01/17/zh-google-python-styleguide/"
           data-tag="Python"
           data-author="" >
            <span class="post-title" title="google Python 风格指南（中文版）">google Python 风格指南（中文版）</span>
            <span class="post-date" title="2017-01-17 18:03:22">2017/01/17</span>
        </a>
        
        <a  class="全部文章 智能云 "
           href="/2017/01/07/cyborg_intro/"
           data-tag="Cyborg,Openstack"
           data-author="" >
            <span class="post-title" title="Openstack Cyborg 项目介绍">Openstack Cyborg 项目介绍</span>
            <span class="post-date" title="2017-01-07 00:38:19">2017/01/07</span>
        </a>
        
        <a  class="全部文章 Tools "
           href="/2016/12/24/xshell-skill/"
           data-tag="xshell,隧道,效率,转发,多级跳转"
           data-author="" >
            <span class="post-title" title="xshell工具在开发中的使用技巧">xshell工具在开发中的使用技巧</span>
            <span class="post-date" title="2016-12-24 23:10:36">2016/12/24</span>
        </a>
        
        <a  class="全部文章 Tools "
           href="/2016/09/02/vim-python/"
           data-tag="vim"
           data-author="" >
            <span class="post-title" title="python，NFV项目开发--vim">python，NFV项目开发--vim</span>
            <span class="post-date" title="2016-09-02 19:35:02">2016/09/02</span>
        </a>
        
        <a  class="全部文章 Openstack_op "
           href="/2016/08/18/vncviewer-openstack-vm/"
           data-tag="vnc"
           data-author="" >
            <span class="post-title" title="网络不通的情况下，不通过dashboard，在未装图形化系统上查看openstack 创建的vm">网络不通的情况下，不通过dashboard，在未装图形化系统上查看openstack 创建的vm</span>
            <span class="post-date" title="2016-08-18 13:49:11">2016/08/18</span>
        </a>
        
        <a  class="全部文章 Openstack_op "
           href="/2016/07/05/lb/"
           data-tag="Load Balance,LVS"
           data-author="" >
            <span class="post-title" title="Load Balance(LVS实现方式)">Load Balance(LVS实现方式)</span>
            <span class="post-date" title="2016-07-05 23:10:25">2016/07/05</span>
        </a>
        
        <a  class="全部文章 NFV "
           href="/2016/07/05/vnfd-template-para/"
           data-tag="VNFD,template,parameter"
           data-author="" >
            <span class="post-title" title="VNFD模板参数化">VNFD模板参数化</span>
            <span class="post-date" title="2016-07-05 22:57:33">2016/07/05</span>
        </a>
        
        <a  class="全部文章 NFV "
           href="/2016/06/11/prediction/"
           data-tag="OPNFV Prediction"
           data-author="" >
            <span class="post-title" title="OPNFV Prediction">OPNFV Prediction</span>
            <span class="post-date" title="2016-06-11 16:11:10">2016/06/11</span>
        </a>
        
        <a  class="全部文章 Openstack_dev "
           href="/2016/06/11/token-manage/"
           data-tag="openstack token管理"
           data-author="" >
            <span class="post-title" title="openstack token管理">openstack token管理</span>
            <span class="post-date" title="2016-06-11 15:23:00">2016/06/11</span>
        </a>
        
        <a  class="全部文章 NFV "
           href="/2015/12/20/project-life-cycle/"
           data-tag="生命周期,提案,孵化,成熟,集成,归档"
           data-author="" >
            <span class="post-title" title="OPNFV项目生命周期">OPNFV项目生命周期</span>
            <span class="post-date" title="2015-12-20 20:02:27">2015/12/20</span>
        </a>
        
        <a  class="全部文章 NFV "
           href="/2015/12/20/system_membership/"
           data-tag="管理体制,会员制,会员,Board,TSC"
           data-author="" >
            <span class="post-title" title="OPNFV的管理体制和会员制">OPNFV的管理体制和会员制</span>
            <span class="post-date" title="2015-12-20 19:32:42">2015/12/20</span>
        </a>
        
        <a  class="全部文章 NFV "
           href="/2015/12/19/introduction-4/"
           data-tag="开发,开源,参与"
           data-author="" >
            <span class="post-title" title="OPNFV简介(4) - 对所有人开放">OPNFV简介(4) - 对所有人开放</span>
            <span class="post-date" title="2015-12-19 16:16:06">2015/12/19</span>
        </a>
        
        <a  class="全部文章 NFV "
           href="/2015/12/19/introduction-3/"
           data-tag="上游关系"
           data-author="" >
            <span class="post-title" title="OPNFV简介(3) - 和上游关系">OPNFV简介(3) - 和上游关系</span>
            <span class="post-date" title="2015-12-19 16:04:59">2015/12/19</span>
        </a>
        
        <a  class="全部文章 NFV "
           href="/2015/12/19/introduction-2/"
           data-tag="子项目,ETSI,目标,生态"
           data-author="" >
            <span class="post-title" title="OPNFV简介(2) - overview">OPNFV简介(2) - overview</span>
            <span class="post-date" title="2015-12-19 15:54:34">2015/12/19</span>
        </a>
        
        <a  class="全部文章 NFV "
           href="/2015/12/18/introduction-1/"
           data-tag="产业趋势,产业需求"
           data-author="" >
            <span class="post-title" title="OPNFV简介(1) - 背景">OPNFV简介(1) - 背景</span>
            <span class="post-date" title="2015-12-18 00:44:16">2015/12/18</span>
        </a>
        
        <div id="no-item-tips">

        </div>
    </nav>
    <div id="outline-list">
    </div>
</div>
    </div>
    <div class="hide-list">
        <div class="semicircle" data-title="切换全屏 快捷键 s">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div id="post">
    <div class="pjax">
        <article id="post-resize-error" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">resize失败原因调查</h1>
    
    <div class="article-meta">
        
        
        
        <span class="book">
            <i class="iconfont icon-category"></i>
            
            
            <a  data-rel="Openstack_op">Openstack_op</a>
            
        </span>
        
        
        <span class="tag">
            <i class="iconfont icon-tag"></i>
            
            <a class="color5">Nova</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
            发布时间 : <time class="date" title='最后更新: 2022-04-02 08:42:52'>2017-07-04 10:20</time>
        
    </div>
    <div class="article-meta">
        
        
        <span id="busuanzi_container_page_pv">
            阅读 :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AF%B9%E4%BA%91%E4%B8%BB%E6%9C%BA%E8%BF%9B%E8%A1%8Cresize%E6%93%8D%E4%BD%9C%E6%B2%A1%E6%9C%89%E6%88%90%E5%8A%9F"><span class="toc-text">对云主机进行resize操作没有成功</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%A3%80%E6%9F%A5%E4%BA%91%E4%B8%BB%E6%9C%BA%E6%89%80%E5%9C%A8%E8%8A%82%E7%82%B9%E7%9A%84nova-compute-log"><span class="toc-text">检查云主机所在节点的nova-compute.log</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%86%E6%9E%90%E5%8E%9F%E5%9B%A0"><span class="toc-text">分析原因</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AF%B9%E7%AD%96"><span class="toc-text">对策</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95ok"><span class="toc-text">测试ok</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E6%97%A5%E5%BF%97%E5%AF%B9resize%E7%9A%84%E6%B5%81%E7%A8%8B%E8%BF%9B%E8%A1%8C%E5%88%86%E6%9E%90"><span class="toc-text">通过日志对resize的流程进行分析</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%BA%90%E8%8A%82%E7%82%B9"><span class="toc-text">源节点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B0%E7%9A%84%E8%8A%82%E7%82%B9"><span class="toc-text">新的节点</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%8B%A5resize%E5%89%8D%E7%9A%84vm%E4%B8%BA%E5%85%B3%E6%9C%BA%E7%8A%B6%E6%80%81%EF%BC%8Cresize%E6%93%8D%E4%BD%9C%E4%B8%8D%E4%BC%9A%E5%9C%A8resize%E4%B9%8B%E5%90%8E%E8%87%AA%E5%8A%A8%E5%BC%80%E6%9C%BA"><span class="toc-text">若resize前的vm为关机状态，resize操作不会在resize之后自动开机</span></a></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="对云主机进行resize操作没有成功"><a href="#对云主机进行resize操作没有成功" class="headerlink" title="对云主机进行resize操作没有成功"></a>对云主机进行resize操作没有成功</h1><p>对一个vm做resize，即从一个小的flavor换一个大的flavor，没有成功</p>
<h1 id="检查云主机所在节点的nova-compute-log"><a href="#检查云主机所在节点的nova-compute-log" class="headerlink" title="检查云主机所在节点的nova-compute.log"></a>检查云主机所在节点的nova-compute.log</h1><pre><code>2017-07-03 17:50:08.573 24296 TRACE oslo_messaging.rpc.dispatcher   File &quot;/usr/lib/python2.7/site-packages/nova/compute/manager.py&quot;, line 6959, in _error_out_instance_on_exception
2017-07-03 17:50:08.573 24296 TRACE oslo_messaging.rpc.dispatcher     raise error.inner_exception
2017-07-03 17:50:08.573 24296 TRACE oslo_messaging.rpc.dispatcher ResizeError: Resize error: not able to execute ssh command: Unexpected error while running command.
2017-07-03 17:50:08.573 24296 TRACE oslo_messaging.rpc.dispatcher Command: ssh 172.16.231.26 -p 22 mkdir -p /var/lib/nova/instances/54091e90-55f5-4f4d-8f66-31fbc787584f
2017-07-03 17:50:08.573 24296 TRACE oslo_messaging.rpc.dispatcher Exit code: 255
2017-07-03 17:50:08.573 24296 TRACE oslo_messaging.rpc.dispatcher Stdout: u&#39;&#39;
2017-07-03 17:50:08.573 24296 TRACE oslo_messaging.rpc.dispatcher Stderr: u&#39;@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\n@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @\r\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\r\nIT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!\r\nSomeone could be eavesdropping on you right now (man-in-the-middle attack)!\r\nIt is also possible that a host key has just been changed.\r\nThe fingerprint for the ECDSA key sent by the remote host is\nc8:0b:98:9d:8d:d8:14:89:e6:fe:97:66:22:4e:57:13.\r\nPlease contact your system administrator.\r\nAdd correct host key in /var/lib/nova/.ssh/known_hosts to get rid of this message.\r\nOffending ECDSA key in /var/lib/nova/.ssh/known_hosts:34\r\nPassword authentication is disabled to avoid man-in-the-middle attacks.\r\nKeyboard-interactive authentication is disabled to avoid man-in-the-middle attacks.\r\nPermission denied (publickey,gssapi-keyex,gssapi-with-mic,password).\r\n&#39;</code></pre>
<h1 id="分析原因"><a href="#分析原因" class="headerlink" title="分析原因"></a>分析原因</h1><p>可能是计算节点的nova用户的host key改变了</p>
<h1 id="对策"><a href="#对策" class="headerlink" title="对策"></a>对策</h1><p>对所有计算节点 删除/var/lib/nova/.ssh/known_hosts 有关计算节点的行，重新用nova用户ssh互相登陆，新增host key并确保nova用户计算节点之间ssh都是互信的</p>
<h1 id="测试ok"><a href="#测试ok" class="headerlink" title="测试ok"></a>测试ok</h1><pre><code>[root@NFJD-TESTVM-CORE-API-1 ~]# nova show e1b51267-2fad-48da-a749-bb36b729bf0c
+--------------------------------------+-------------------------------------------------------------------+
| Property                             | Value                                                             |
+--------------------------------------+-------------------------------------------------------------------+
| OS-DCF:diskConfig                    | MANUAL                                                            |
| OS-EXT-AZ:availability_zone          | nova                                                              |
| OS-EXT-SRV-ATTR:host                 | NFJD-TESTN-COMPUTE-2                                              |
| OS-EXT-SRV-ATTR:hypervisor_hostname  | NFJD-TESTN-COMPUTE-2                                              |
| OS-EXT-SRV-ATTR:instance_name        | instance-0000685c                                                 |
| OS-EXT-STS:power_state               | 1                                                                 |
| OS-EXT-STS:task_state                | -                                                                 |
| OS-EXT-STS:vm_state                  | active                                                            |
| OS-SRV-USG:launched_at               | 2017-07-04T01:13:23.000000                                        |
| OS-SRV-USG:terminated_at             | -                                                                 |
| accessIPv4                           |                                                                   |
| accessIPv6                           |                                                                   |
| config_drive                         | True                                                              |
| created                              | 2017-07-04T01:12:23Z                                              |
| flavor                               | m1.medium (3)                                                     |
| hostId                               | d4b42eac18963a6b9c295b06afa49642ce9e51d12d9aef2d1a16e930          |
| id                                   | e1b51267-2fad-48da-a749-bb36b729bf0c                              |
| image                                | CentOS-7.1-x86_64-20161018 (8aaf1759-9fb4-4ba9-8cff-1743eb824c5f) |
| key_name                             | -                                                                 |
| metadata                             | &#123;&#125;                                                                |
| name                                 | test                                                              |
| net001 network                       | 192.168.2.127                                                     |
| os-extended-volumes:volumes_attached | []                                                                |
| progress                             | 0                                                                 |
| security_groups                      | default                                                           |
| status                               | ACTIVE                                                            |
| tenant_id                            | 6c149dcd3cf64171b8dd972dd03bbac0                                  |
| updated                              | 2017-07-04T01:12:19Z                                              |
| user_id                              | 62f52135115f4898bd0d82c1f0cd632b                                  |
+--------------------------------------+-------------------------------------------------------------------+
[root@NFJD-TESTVM-CORE-API-1 ~]# nova resize e1b51267-2fad-48da-a749-bb36b729bf0c 4
[root@NFJD-TESTVM-CORE-API-1 ~]# nova show e1b51267-2fad-48da-a749-bb36b729bf0c
+--------------------------------------+-------------------------------------------------------------------+
| Property                             | Value                                                             |
+--------------------------------------+-------------------------------------------------------------------+
| OS-DCF:diskConfig                    | MANUAL                                                            |
| OS-EXT-AZ:availability_zone          | nova                                                              |
| OS-EXT-SRV-ATTR:host                 | NFJD-TESTN-COMPUTE-2                                              |
| OS-EXT-SRV-ATTR:hypervisor_hostname  | NFJD-TESTN-COMPUTE-2                                              |
| OS-EXT-SRV-ATTR:instance_name        | instance-0000685c                                                 |
| OS-EXT-STS:power_state               | 1                                                                 |
| OS-EXT-STS:task_state                | -                                                                 |
| OS-EXT-STS:vm_state                  | active                                                            |
| OS-SRV-USG:launched_at               | 2017-07-04T02:35:50.000000                                        |
| OS-SRV-USG:terminated_at             | -                                                                 |
| accessIPv4                           |                                                                   |
| accessIPv6                           |                                                                   |
| config_drive                         | True                                                              |
| created                              | 2017-07-04T02:34:42Z                                              |
| flavor                               | m1.large (4)                                                     |
| hostId                               | d4b42eac18963a6b9c295b06afa49642ce9e51d12d9aef2d1a16e930          |
| id                                   | e1b51267-2fad-48da-a749-bb36b729bf0c                              |
| image                                | CentOS-7.1-x86_64-20161018 (8aaf1759-9fb4-4ba9-8cff-1743eb824c5f) |
| key_name                             | -                                                                 |
| metadata                             | &#123;&#125;                                                                |
| name                                 | test                                                              |
| net001 network                       | 192.168.2.127                                                     |
| os-extended-volumes:volumes_attached | []                                                                |
| progress                             | 0                                                                 |
| security_groups                      | default                                                           |
| status                               | ACTIVE                                                            |
| tenant_id                            | 6c149dcd3cf64171b8dd972dd03bbac0                                  |
| updated                              | 2017-07-04T02:34:19Z                                              |
| user_id                              | 62f52135115f4898bd0d82c1f0cd632b                                  |
+--------------------------------------+-------------------------------------------------------------------+</code></pre>
<p>可以看到flavor从 m1.medium -&gt; m1.large</p>
<h1 id="通过日志对resize的流程进行分析"><a href="#通过日志对resize的流程进行分析" class="headerlink" title="通过日志对resize的流程进行分析"></a>通过日志对resize的流程进行分析</h1><h2 id="源节点"><a href="#源节点" class="headerlink" title="源节点"></a>源节点</h2><pre><code>2017-07-04 10:35:40.999 9791 DEBUG oslo_concurrency.processutils [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] Running cmd (subprocess): env LC_ALL=C LANG=C qemu-img info /var/lib/nova/instances/d63958dc-3510-4291-b219-93183c49d2ca/disk execute /usr/lib/python2.7/site-packages/oslo_concurrency/processutils.py:223</code></pre>
<p>读取云主机disk信息</p>
<pre><code>2017-07-04 10:35:41.430 9791 DEBUG oslo_concurrency.processutils [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] Running cmd (subprocess): ssh 172.16.231.26 -p 22 mkdir -p /var/lib/nova/instances/d63958dc-3510-4291-b219-93183c49d2ca execute /usr/lib/python2.7/site-packages/oslo_concurrency/processutils.py:223</code></pre>
<p>从源节点ssh到目标节点创建实例id的文件夹</p>
<pre><code>2017-07-04 10:35:41.524 9791 DEBUG nova.virt.libvirt.driver [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] [instance: d63958dc-3510-4291-b219-93183c49d2ca] Shutting down instance from state 1 _clean_shutdown /usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py:2517
2017-07-04 10:35:43.572 9791 INFO nova.virt.libvirt.driver [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] [instance: d63958dc-3510-4291-b219-93183c49d2ca] Instance shutdown successfully after 2 seconds.
2017-07-04 10:35:43.578 9791 INFO nova.virt.libvirt.driver [-] [instance: d63958dc-3510-4291-b219-93183c49d2ca] Instance destroyed successfully.</code></pre>
<p>关闭vm</p>
<pre><code>2017-07-04 10:35:43.578 9791 DEBUG oslo_concurrency.processutils [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] Running cmd (subprocess): mv /var/lib/nova/instances/d63958dc-3510-4291-b219-93183c49d2ca /var/lib/nova/instances/d63958dc-3510-4291-b219-93183c49d2ca_resize execute /usr/lib/python2.7/site-packages/oslo_concurrency/processutils.py:223</code></pre>
<p>vm的disk文件夹从d63958dc-3510-4291-b219-93183c49d2ca移动到d63958dc-3510-4291-b219-93183c49d2ca_resize</p>
<pre><code>2017-07-04 10:35:49.547 9791 DEBUG oslo_concurrency.processutils [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] CMD &quot;qemu-img convert -f qcow2 -O qcow2 /var/lib/nova/instances/d63958dc-3510-4291-b219-93183c49d2ca_resize/disk /var/lib/nova/instances/d63958dc-3510-4291-b219-93183c49d2ca_resize/disk_rbase&quot; returned: 0 in 5.957s execute /usr/lib/python2.7/site-packages/oslo_concurrency/processutils.py:254</code></pre>
<p>将disk文件生成qcow2格式的新文件disk_rbase</p>
<pre><code>2017-07-04 10:35:49.682 9791 DEBUG oslo_concurrency.processutils [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] CMD &quot;rsync --sparse --compress --dry-run /var/lib/nova/instances/d63958dc-3510-4291-b219-93183c49d2ca_resize/disk_rbase 172.16.231.26:/var/lib/nova/instances/d63958dc-3510-4291-b219-93183c49d2ca/disk&quot; returned: 0 in 0.133s execute /usr/lib/python2.7/site-packages/oslo_concurrency/processutils.py:254</code></pre>
<p>将disk文件通过rsync拷贝到新节点</p>
<pre><code>2017-07-04 10:35:58.295 9791 DEBUG nova.virt.driver [-] Emitting event &lt;LifecycleEvent: 1499135743.29, d63958dc-3510-4291-b219-93183c49d2ca =&gt; Stopped&gt; emit_event /usr/lib/python2.7/site-packages/nova/virt/driver.py:1309
2017-07-04 10:35:58.297 9791 INFO nova.compute.manager [-] [instance: d63958dc-3510-4291-b219-93183c49d2ca] VM Stopped (Lifecycle Event)
2017-07-04 10:35:58.367 9791 DEBUG nova.compute.manager [req-bb3cd615-5752-4574-86a5-efea318d4cd3 - - - - -] [instance: d63958dc-3510-4291-b219-93183c49d2ca] Synchronizing instance power state after lifecycle event &quot;Stopped&quot;; current vm_state: active, current task_state: resize_migrating, current DB power_state: 1, VM power_state: 4 handle_lifecycle_event /usr/lib/python2.7/site-packages/nova/compute/manager.py:1274</code></pre>
<p>vm的生命周期更新为STOP关机</p>
<pre><code>2017-07-04 10:38:27.357 9791 DEBUG oslo_concurrency.processutils [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] CMD &quot;rsync --sparse --compress /var/lib/nova/instances/d63958dc-3510-4291-b219-93183c49d2ca_resize/disk_rbase 172.16.231.26:/var/lib/nova/instances/d63958dc-3510-4291-b219-93183c49d2ca/disk&quot; returned: 0 in 157.673s execute /usr/lib/python2.7/site-packages/oslo_concurrency/processutils.py:254</code></pre>
<p>之前的“将disk文件通过rsync拷贝到新节点”命令结束，命令返回状态码正常，返回0。可以看出这个拷贝非常耗时间，从命令发出到结束，耗时近三分钟</p>
<pre><code>2017-07-04 10:38:27.360 9791 DEBUG oslo_concurrency.processutils [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] Running cmd (subprocess): rm -f /var/lib/nova/instances/d63958dc-3510-4291-b219-93183c49d2ca_resize/disk_rbase execute /usr/lib/python2.7/site-packages/oslo_concurrency/processutils.py:223</code></pre>
<p>删除disk_rbase文件</p>
<pre><code>2017-07-04 10:38:27.887 9791 DEBUG oslo_concurrency.processutils [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] Running cmd (subprocess): rsync --sparse --compress --dry-run /var/lib/nova/instances/d63958dc-3510-4291-b219-93183c49d2ca_resize/disk.config 172.16.231.26:/var/lib/nova/instances/d63958dc-3510-4291-b219-93183c49d2ca/disk.config execute /usr/lib/python2.7/site-packages/oslo_concurrency/processutils.py:223</code></pre>
<p>将disk.conf文件通过rsync拷贝到新节点  </p>
<h2 id="新的节点"><a href="#新的节点" class="headerlink" title="新的节点"></a>新的节点</h2><pre><code>2017-07-04 10:36:41.924 7940 DEBUG nova.compute.manager [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] [instance: d63958dc-3510-4291-b219-93183c49d2ca] Stashing vm_state: active _prep_resize /usr/lib/python2.7/site-packages/nova/compute/manager.py:4197
2017-07-04 10:36:42.083 7940 DEBUG oslo_concurrency.lockutils [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] Lock &quot;compute_resources&quot; acquired by &quot;resize_claim&quot; :: waited 0.000s inner /usr/lib/python2.7/site-packages/oslo_concurrency/lockutils.py:444
2017-07-04 10:36:42.084 7940 DEBUG nova.compute.resource_tracker [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] Memory overhead for 8192 MB instance; 0 MB resize_claim /usr/lib/python2.7/site-packages/nova/compute/resource_tracker.py:181
2017-07-04 10:36:42.087 7940 INFO nova.compute.claims [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] [instance: d63958dc-3510-4291-b219-93183c49d2ca] Attempting claim: memory 8192 MB, disk 80 GB
2017-07-04 10:36:42.087 7940 INFO nova.compute.claims [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] [instance: d63958dc-3510-4291-b219-93183c49d2ca] Total memory: 257763 MB, used: 334848.00 MB
2017-07-04 10:36:42.088 7940 INFO nova.compute.claims [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] [instance: d63958dc-3510-4291-b219-93183c49d2ca] memory limit: 386644.50 MB, free: 51796.50 MB
2017-07-04 10:36:42.088 7940 INFO nova.compute.claims [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] [instance: d63958dc-3510-4291-b219-93183c49d2ca] Total disk: 199 GB, used: 1960.00 GB
2017-07-04 10:36:42.089 7940 INFO nova.compute.claims [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] [instance: d63958dc-3510-4291-b219-93183c49d2ca] disk limit: 3184.00 GB, free: 1224.00 GB
2017-07-04 10:36:42.135 7940 DEBUG nova.compute.resources.vcpu [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] Total CPUs: 32 VCPUs, used: 172.00 VCPUs test /usr/lib/python2.7/site-packages/nova/compute/resources/vcpu.py:52
2017-07-04 10:36:42.136 7940 DEBUG nova.compute.resources.vcpu [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] CPUs limit: 512.00 VCPUs, free: 340.00 VCPUs test /usr/lib/python2.7/site-packages/nova/compute/resources/vcpu.py:63
2017-07-04 10:36:42.136 7940 INFO nova.compute.claims [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] [instance: d63958dc-3510-4291-b219-93183c49d2ca] Claim successful</code></pre>
<p>为即将要resize的vm申请cpu，mem，disk资源</p>
<pre><code>2017-07-04 10:39:31.543 7940 DEBUG keystoneclient.session [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] REQ: curl -g -i -X GET http://172.16.231.21:9696/v2.0/ports.json?tenant_id=6c149dcd3cf64171b8dd972dd03bbac0&amp;device_id=d63958dc-3510-4291-b219-93183c49d2ca -H &quot;User-Agent: python-neutronclient&quot; -H &quot;Accept: application/json&quot; -H &quot;X-Auth-Token: &#123;SHA1&#125;a4553ab155061f8207794e3a5fad6865cd9af651&quot; _http_log_request /usr/lib/python2.7/site-packages/keystoneclient/session.py:195
2017-07-04 10:39:31.833 7940 DEBUG keystoneclient.session [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] RESP: [200] date: Tue, 04 Jul 2017 02:37:04 GMT connection: keep-alive content-type: application/json; charset=UTF-8 content-length: 701 x-openstack-request-id: req-a75dc999-a4b4-4d94-b544-7dfea42becf0
RESP BODY: &#123;&quot;ports&quot;: [&#123;&quot;status&quot;: &quot;ACTIVE&quot;, &quot;binding:host_id&quot;: &quot;NFJD-TESTN-COMPUTE-3&quot;, &quot;allowed_address_pairs&quot;: [], &quot;extra_dhcp_opts&quot;: [], &quot;device_owner&quot;: &quot;compute:nova&quot;, &quot;fixed_ips&quot;: [&#123;&quot;subnet_id&quot;: &quot;8d375886-7bb3-4d9f-a049-ecf2eb25f62a&quot;, &quot;ip_address&quot;: &quot;192.168.2.128&quot;&#125;], &quot;id&quot;: &quot;327e38f0-d108-4240-a053-5c4c4878f88c&quot;, &quot;security_groups&quot;: [&quot;68a68b74-d424-4a15-8830-c7d2b89ebd56&quot;], &quot;device_id&quot;: &quot;d63958dc-3510-4291-b219-93183c49d2ca&quot;, &quot;name&quot;: &quot;&quot;, &quot;admin_state_up&quot;: true, &quot;network_id&quot;: &quot;ee98ec6a-e1ed-43eb-9d0a-26080d277484&quot;, &quot;tenant_id&quot;: &quot;6c149dcd3cf64171b8dd972dd03bbac0&quot;, &quot;binding:vif_details&quot;: &#123;&quot;port_filter&quot;: false&#125;, &quot;binding:vnic_type&quot;: &quot;normal&quot;, &quot;binding:vif_type&quot;: &quot;ovs&quot;, &quot;mac_address&quot;: &quot;fa:16:3e:40:33:dd&quot;&#125;]&#125;
 _http_log_response /usr/lib/python2.7/site-packages/keystoneclient/session.py:224</code></pre>
<p>获取vm的port信息</p>
<pre><code>2017-07-04 10:39:31.834 7940 DEBUG keystoneclient.session [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] REQ: curl -g -i -X PUT http://172.16.231.21:9696/v2.0/ports/327e38f0-d108-4240-a053-5c4c4878f88c.json -H &quot;User-Agent: python-neutronclient&quot; -H &quot;Content-Type: application/json&quot; -H &quot;Accept: application/json&quot; -H &quot;X-Auth-Token: &#123;SHA1&#125;a4553ab155061f8207794e3a5fad6865cd9af651&quot; -d &#39;&#123;&quot;port&quot;: &#123;&quot;binding:host_id&quot;: &quot;NFJD-TESTN-COMPUTE-2&quot;&#125;&#125;&#39; _http_log_request /usr/lib/python2.7/site-packages/keystoneclient/session.py:195
2017-07-04 10:39:31.928 7940 DEBUG keystoneclient.session [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] RESP: [200] date: Tue, 04 Jul 2017 02:37:04 GMT connection: keep-alive content-type: application/json; charset=UTF-8 content-length: 698 x-openstack-request-id: req-4c2d569d-b589-4b33-b17a-2fe9ecec50c8
RESP BODY: &#123;&quot;port&quot;: &#123;&quot;status&quot;: &quot;ACTIVE&quot;, &quot;binding:host_id&quot;: &quot;NFJD-TESTN-COMPUTE-2&quot;, &quot;allowed_address_pairs&quot;: [], &quot;extra_dhcp_opts&quot;: [], &quot;device_owner&quot;: &quot;compute:nova&quot;, &quot;fixed_ips&quot;: [&#123;&quot;subnet_id&quot;: &quot;8d375886-7bb3-4d9f-a049-ecf2eb25f62a&quot;, &quot;ip_address&quot;: &quot;192.168.2.128&quot;&#125;], &quot;id&quot;: &quot;327e38f0-d108-4240-a053-5c4c4878f88c&quot;, &quot;security_groups&quot;: [&quot;68a68b74-d424-4a15-8830-c7d2b89ebd56&quot;], &quot;device_id&quot;: &quot;d63958dc-3510-4291-b219-93183c49d2ca&quot;, &quot;name&quot;: &quot;&quot;, &quot;admin_state_up&quot;: true, &quot;network_id&quot;: &quot;ee98ec6a-e1ed-43eb-9d0a-26080d277484&quot;, &quot;tenant_id&quot;: &quot;6c149dcd3cf64171b8dd972dd03bbac0&quot;, &quot;binding:vif_details&quot;: &#123;&quot;port_filter&quot;: false&#125;, &quot;binding:vnic_type&quot;: &quot;normal&quot;, &quot;binding:vif_type&quot;: &quot;ovs&quot;, &quot;mac_address&quot;: &quot;fa:16:3e:40:33:dd&quot;&#125;&#125;
 _http_log_response /usr/lib/python2.7/site-packages/keystoneclient/session.py:224</code></pre>
<p>修改vm的port信息，将binding host信息从  NFJD-TESTN-COMPUTE-2修改成 NFJD-TESTN-COMPUTE-3<br>REQ的body信息-d ‘{“port”: {“binding:host_id”: “NFJD-TESTN-COMPUTE-2”}}’<br>RESP的body从”binding:host_id”: “NFJD-TESTN-COMPUTE-3”, 变更成了”binding:host_id”: “NFJD-TESTN-COMPUTE-2”, </p>
<pre><code>2017-07-04 10:39:32.654 7940 DEBUG nova.virt.libvirt.driver [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] [instance: d63958dc-3510-4291-b219-93183c49d2ca] Starting finish_migration finish_migration /usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py:6989</code></pre>
<p>开始 finish_migration 方法</p>
<pre><code>2017-07-04 10:39:32.655 7940 DEBUG nova.virt.disk.api [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] Checking if we can resize image /var/lib/nova/instances/d63958dc-3510-4291-b219-93183c49d2ca/disk. size=85899345920 can_resize_image /usr/lib/python2.7/site-packages/nova/virt/disk/api.py:213
2017-07-04 10:39:32.655 7940 DEBUG oslo_concurrency.processutils [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] Running cmd (subprocess): env LC_ALL=C LANG=C qemu-img info /var/lib/nova/instances/d63958dc-3510-4291-b219-93183c49d2ca/disk execute /usr/lib/python2.7/site-packages/oslo_concurrency/processutils.py:223</code></pre>
<p>通过命令“qemu-img info”检查disk文件是否可以resize</p>
<pre><code>2017-07-04 10:39:32.722 7940 DEBUG nova.virt.disk.api [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] Checking if we can extend filesystem inside /var/lib/nova/instances/d63958dc-3510-4291-b219-93183c49d2ca/disk. CoW=True is_image_extendable /usr/lib/python2.7/site-packages/nova/virt/disk/api.py:227
2017-07-04 10:39:32.723 7940 DEBUG nova.virt.disk.vfs.api [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] Instance for image imgfile=/var/lib/nova/instances/d63958dc-3510-4291-b219-93183c49d2ca/disk imgfmt=qcow2 partition=None instance_for_image /usr/lib/python2.7/site-packages/nova/virt/disk/vfs/api.py:46
2017-07-04 10:39:32.723 7940 DEBUG nova.virt.disk.vfs.api [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] Using primary VFSGuestFS instance_for_image /usr/lib/python2.7/site-packages/nova/virt/disk/vfs/api.py:50
2017-07-04 10:39:32.724 7940 DEBUG nova.virt.disk.vfs.guestfs [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] Setting up appliance for /var/lib/nova/instances/d63958dc-3510-4291-b219-93183c49d2ca/disk qcow2 setup /usr/lib/python2.7/site-packages/nova/virt/disk/vfs/guestfs.py:169</code></pre>
<p>检查是否可以extend filesystem</p>
<pre><code>2017-07-04 10:39:34.190 7940 DEBUG nova.network.neutronv2.api [req-5539f967-c22d-42c0-8f82-afa2017bb990 95c6c2eaccd8432481933be931a54690 98c26c5e5374423bb2c2e61a96fe6470 - - -] [instance: d63958dc-3510-4291-b219-93183c49d2ca] _get_instance_nw_info() _get_instance_nw_info /usr/lib/python2.7/site-packages/nova/network/neutronv2/api.py:773
2017-07-04 10:39:34.213 7940 DEBUG keystoneclient.auth.identity.v2 [req-5539f967-c22d-42c0-8f82-afa2017bb990 95c6c2eaccd8432481933be931a54690 98c26c5e5374423bb2c2e61a96fe6470 - - -] Making authentication request to http://172.16.231.115:35357/v2.0/tokens get_auth_ref /usr/lib/python2.7/site-packages/keystoneclient/auth/identity/v2.py:76
2017-07-04 10:39:34.376 7940 DEBUG keystoneclient.session [req-5539f967-c22d-42c0-8f82-afa2017bb990 95c6c2eaccd8432481933be931a54690 98c26c5e5374423bb2c2e61a96fe6470 - - -] REQ: curl -g -i -X GET http://172.16.231.21:9696/v2.0/ports.json?tenant_id=6c149dcd3cf64171b8dd972dd03bbac0&amp;device_id=d63958dc-3510-4291-b219-93183c49d2ca -H &quot;User-Agent: python-neutronclient&quot; -H &quot;Accept: application/json&quot; -H &quot;X-Auth-Token: &#123;SHA1&#125;0b2a12732f6bd659a206dfb020858f050cdc5fd6&quot; _http_log_request /usr/lib/python2.7/site-packages/keystoneclient/session.py:195
2017-07-04 10:39:34.638 7940 DEBUG keystoneclient.session [req-5539f967-c22d-42c0-8f82-afa2017bb990 95c6c2eaccd8432481933be931a54690 98c26c5e5374423bb2c2e61a96fe6470 - - -] RESP: [200] date: Tue, 04 Jul 2017 02:37:07 GMT connection: keep-alive content-type: application/json; charset=UTF-8 content-length: 701 x-openstack-request-id: req-a8f53ba8-9851-40c3-8ac2-0fc8a852d833
RESP BODY: &#123;&quot;ports&quot;: [&#123;&quot;status&quot;: &quot;ACTIVE&quot;, &quot;binding:host_id&quot;: &quot;NFJD-TESTN-COMPUTE-2&quot;, &quot;allowed_address_pairs&quot;: [], &quot;extra_dhcp_opts&quot;: [], &quot;device_owner&quot;: &quot;compute:nova&quot;, &quot;fixed_ips&quot;: [&#123;&quot;subnet_id&quot;: &quot;8d375886-7bb3-4d9f-a049-ecf2eb25f62a&quot;, &quot;ip_address&quot;: &quot;192.168.2.128&quot;&#125;], &quot;id&quot;: &quot;327e38f0-d108-4240-a053-5c4c4878f88c&quot;, &quot;security_groups&quot;: [&quot;68a68b74-d424-4a15-8830-c7d2b89ebd56&quot;], &quot;device_id&quot;: &quot;d63958dc-3510-4291-b219-93183c49d2ca&quot;, &quot;name&quot;: &quot;&quot;, &quot;admin_state_up&quot;: true, &quot;network_id&quot;: &quot;ee98ec6a-e1ed-43eb-9d0a-26080d277484&quot;, &quot;tenant_id&quot;: &quot;6c149dcd3cf64171b8dd972dd03bbac0&quot;, &quot;binding:vif_details&quot;: &#123;&quot;port_filter&quot;: false&#125;, &quot;binding:vnic_type&quot;: &quot;normal&quot;, &quot;binding:vif_type&quot;: &quot;ovs&quot;, &quot;mac_address&quot;: &quot;fa:16:3e:40:33:dd&quot;&#125;]&#125;
 _http_log_response /usr/lib/python2.7/site-packages/keystoneclient/session.py:224
2017-07-04 10:39:34.640 7940 DEBUG keystoneclient.session [req-5539f967-c22d-42c0-8f82-afa2017bb990 95c6c2eaccd8432481933be931a54690 98c26c5e5374423bb2c2e61a96fe6470 - - -] REQ: curl -g -i -X GET http://172.16.231.21:9696/v2.0/networks.json?id=ee98ec6a-e1ed-43eb-9d0a-26080d277484 -H &quot;User-Agent: python-neutronclient&quot; -H &quot;Accept: application/json&quot; -H &quot;X-Auth-Token: &#123;SHA1&#125;aafe088a1f0bdaf55a3374d2e8437a7fac0d3a6e&quot; _http_log_request /usr/lib/python2.7/site-packages/keystoneclient/session.py:195
2017-07-04 10:39:34.891 7940 DEBUG keystoneclient.session [req-5539f967-c22d-42c0-8f82-afa2017bb990 95c6c2eaccd8432481933be931a54690 98c26c5e5374423bb2c2e61a96fe6470 - - -] RESP: [200] date: Tue, 04 Jul 2017 02:37:07 GMT connection: keep-alive content-type: application/json; charset=UTF-8 content-length: 269 x-openstack-request-id: req-0d9ef411-e617-443b-821d-730c66cd9507
RESP BODY: &#123;&quot;networks&quot;: [&#123;&quot;status&quot;: &quot;ACTIVE&quot;, &quot;subnets&quot;: [&quot;8d375886-7bb3-4d9f-a049-ecf2eb25f62a&quot;], &quot;name&quot;: &quot;net001&quot;, &quot;admin_state_up&quot;: true, &quot;router:external&quot;: false, &quot;tenant_id&quot;: &quot;23f23d0bed4f4f408ff7d21492254e1d&quot;, &quot;shared&quot;: false, &quot;id&quot;: &quot;ee98ec6a-e1ed-43eb-9d0a-26080d277484&quot;&#125;]&#125;
 _http_log_response /usr/lib/python2.7/site-packages/keystoneclient/session.py:224
2017-07-04 10:39:34.893 7940 DEBUG keystoneclient.session [req-5539f967-c22d-42c0-8f82-afa2017bb990 95c6c2eaccd8432481933be931a54690 98c26c5e5374423bb2c2e61a96fe6470 - - -] REQ: curl -g -i -X GET http://172.16.231.21:9696/v2.0/floatingips.json?fixed_ip_address=192.168.2.128&amp;port_id=327e38f0-d108-4240-a053-5c4c4878f88c -H &quot;User-Agent: python-neutronclient&quot; -H &quot;Accept: application/json&quot; -H &quot;X-Auth-Token: &#123;SHA1&#125;0b2a12732f6bd659a206dfb020858f050cdc5fd6&quot; _http_log_request /usr/lib/python2.7/site-packages/keystoneclient/session.py:195
2017-07-04 10:39:34.901 7940 DEBUG keystoneclient.session [req-5539f967-c22d-42c0-8f82-afa2017bb990 95c6c2eaccd8432481933be931a54690 98c26c5e5374423bb2c2e61a96fe6470 - - -] RESP: [200] date: Tue, 04 Jul 2017 02:37:07 GMT connection: keep-alive content-type: application/json; charset=UTF-8 content-length: 19 x-openstack-request-id: req-d8f3d38b-b1a7-4ae6-8dd7-0deae746add4
RESP BODY: &#123;&quot;floatingips&quot;: []&#125;
 _http_log_response /usr/lib/python2.7/site-packages/keystoneclient/session.py:224
2017-07-04 10:39:34.902 7940 DEBUG keystoneclient.session [req-5539f967-c22d-42c0-8f82-afa2017bb990 95c6c2eaccd8432481933be931a54690 98c26c5e5374423bb2c2e61a96fe6470 - - -] REQ: curl -g -i -X GET http://172.16.231.21:9696/v2.0/subnets.json?id=8d375886-7bb3-4d9f-a049-ecf2eb25f62a -H &quot;User-Agent: python-neutronclient&quot; -H &quot;Accept: application/json&quot; -H &quot;X-Auth-Token: &#123;SHA1&#125;aafe088a1f0bdaf55a3374d2e8437a7fac0d3a6e&quot; _http_log_request /usr/lib/python2.7/site-packages/keystoneclient/session.py:195
2017-07-04 10:39:34.917 7940 DEBUG keystoneclient.session [req-5539f967-c22d-42c0-8f82-afa2017bb990 95c6c2eaccd8432481933be931a54690 98c26c5e5374423bb2c2e61a96fe6470 - - -] RESP: [200] date: Tue, 04 Jul 2017 02:37:07 GMT connection: keep-alive content-type: application/json; charset=UTF-8 content-length: 492 x-openstack-request-id: req-fc2f8f43-b004-4cb1-b2c6-d35ecdf43e14
RESP BODY: &#123;&quot;subnets&quot;: [&#123;&quot;vsd_managed&quot;: false, &quot;name&quot;: &quot;net001&quot;, &quot;enable_dhcp&quot;: true, &quot;network_id&quot;: &quot;ee98ec6a-e1ed-43eb-9d0a-26080d277484&quot;, &quot;tenant_id&quot;: &quot;23f23d0bed4f4f408ff7d21492254e1d&quot;, &quot;dns_nameservers&quot;: [&quot;8.8.8.8&quot;], &quot;gateway_ip&quot;: &quot;192.168.2.1&quot;, &quot;ipv6_ra_mode&quot;: null, &quot;allocation_pools&quot;: [&#123;&quot;start&quot;: &quot;192.168.2.2&quot;, &quot;end&quot;: &quot;192.168.2.248&quot;&#125;], &quot;host_routes&quot;: [], &quot;ip_version&quot;: 4, &quot;ipv6_address_mode&quot;: null, &quot;cidr&quot;: &quot;192.168.2.0/24&quot;, &quot;id&quot;: &quot;8d375886-7bb3-4d9f-a049-ecf2eb25f62a&quot;, &quot;subnetpool_id&quot;: null&#125;]&#125;
 _http_log_response /usr/lib/python2.7/site-packages/keystoneclient/session.py:224
2017-07-04 10:39:34.918 7940 DEBUG keystoneclient.session [req-5539f967-c22d-42c0-8f82-afa2017bb990 95c6c2eaccd8432481933be931a54690 98c26c5e5374423bb2c2e61a96fe6470 - - -] REQ: curl -g -i -X GET http://172.16.231.21:9696/v2.0/ports.json?network_id=ee98ec6a-e1ed-43eb-9d0a-26080d277484&amp;device_owner=network%3Adhcp -H &quot;User-Agent: python-neutronclient&quot; -H &quot;Accept: application/json&quot; -H &quot;X-Auth-Token: &#123;SHA1&#125;aafe088a1f0bdaf55a3374d2e8437a7fac0d3a6e&quot; _http_log_request /usr/lib/python2.7/site-packages/keystoneclient/session.py:195
2017-07-04 10:39:34.931 7940 DEBUG keystoneclient.session [req-5539f967-c22d-42c0-8f82-afa2017bb990 95c6c2eaccd8432481933be931a54690 98c26c5e5374423bb2c2e61a96fe6470 - - -] RESP: [200] date: Tue, 04 Jul 2017 02:37:07 GMT connection: keep-alive content-type: application/json; charset=UTF-8 content-length: 13 x-openstack-request-id: req-e39c8301-a788-4ca4-9bed-53c549acd0b1
RESP BODY: &#123;&quot;ports&quot;: []&#125;
 _http_log_response /usr/lib/python2.7/site-packages/keystoneclient/session.py:224
2017-07-04 10:39:34.932 7940 DEBUG nova.network.base_api [req-5539f967-c22d-42c0-8f82-afa2017bb990 95c6c2eaccd8432481933be931a54690 98c26c5e5374423bb2c2e61a96fe6470 - - -] Updating cache with info: [VIF(&#123;&#39;profile&#39;: None, &#39;ovs_interfaceid&#39;: u&#39;327e38f0-d108-4240-a053-5c4c4878f88c&#39;, &#39;preserve_on_delete&#39;: False, &#39;network&#39;: Network(&#123;&#39;bridge&#39;: &#39;alubr0&#39;, &#39;subnets&#39;: [Subnet(&#123;&#39;ips&#39;: [FixedIP(&#123;&#39;meta&#39;: &#123;&#125;, &#39;version&#39;: 4, &#39;type&#39;: &#39;fixed&#39;, &#39;floating_ips&#39;: [], &#39;address&#39;: u&#39;192.168.2.128&#39;&#125;)], &#39;version&#39;: 4, &#39;meta&#39;: &#123;&#125;, &#39;dns&#39;: [IP(&#123;&#39;meta&#39;: &#123;&#125;, &#39;version&#39;: 4, &#39;type&#39;: &#39;dns&#39;, &#39;address&#39;: u&#39;8.8.8.8&#39;&#125;)], &#39;routes&#39;: [], &#39;cidr&#39;: u&#39;192.168.2.0/24&#39;, &#39;gateway&#39;: IP(&#123;&#39;meta&#39;: &#123;&#125;, &#39;version&#39;: 4, &#39;type&#39;: &#39;gateway&#39;, &#39;address&#39;: u&#39;192.168.2.1&#39;&#125;)&#125;)], &#39;meta&#39;: &#123;&#39;injected&#39;: False, &#39;tenant_id&#39;: u&#39;23f23d0bed4f4f408ff7d21492254e1d&#39;&#125;, &#39;id&#39;: u&#39;ee98ec6a-e1ed-43eb-9d0a-26080d277484&#39;, &#39;label&#39;: u&#39;net001&#39;&#125;), &#39;devname&#39;: u&#39;tap327e38f0-d1&#39;, &#39;vnic_type&#39;: u&#39;normal&#39;, &#39;qbh_params&#39;: None, &#39;meta&#39;: &#123;&#125;, &#39;details&#39;: &#123;u&#39;port_filter&#39;: False&#125;, &#39;address&#39;: u&#39;fa:16:3e:40:33:dd&#39;, &#39;active&#39;: True, &#39;type&#39;: u&#39;ovs&#39;, &#39;id&#39;: u&#39;327e38f0-d108-4240-a053-5c4c4878f88c&#39;, &#39;qbg_params&#39;: None&#125;)] update_instance_cache_with_nw_info /usr/lib/python2.7/site-packages/nova/network/base_api.py:42</code></pre>
<p>调用neutron API获取vm的网络信息并更新cache</p>
<pre><code>2017-07-04 10:39:35.163 7940 DEBUG nova.virt.disk.api [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] Checking if we can resize image /var/lib/nova/instances/d63958dc-3510-4291-b219-93183c49d2ca/disk. size=85899345920 can_resize_image /usr/lib/python2.7/site-packages/nova/virt/disk/api.py:213
2017-07-04 10:39:35.165 7940 DEBUG oslo_concurrency.processutils [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] Running cmd (subprocess): env LC_ALL=C LANG=C qemu-img info /var/lib/nova/instances/d63958dc-3510-4291-b219-93183c49d2ca/disk execute /usr/lib/python2.7/site-packages/oslo_concurrency/processutils.py:223</code></pre>
<p>获取image 文件 的信息判断 是否可以resize</p>
<pre><code>2017-07-04 10:39:35.230 7940 DEBUG oslo_concurrency.processutils [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] Running cmd (subprocess): qemu-img resize /var/lib/nova/instances/d63958dc-3510-4291-b219-93183c49d2ca/disk 85899345920 execute /usr/lib/python2.7/site-packages/oslo_concurrency/processutils.py:223</code></pre>
<p>通过“qemu-img resize”命令resize image文件</p>
<pre><code>2017-07-04 10:39:35.297 7940 DEBUG nova.virt.disk.api [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] Checking if we can extend filesystem inside /var/lib/nova/instances/d63958dc-3510-4291-b219-93183c49d2ca/disk. CoW=True is_image_extendable /usr/lib/python2.7/site-packages/nova/virt/disk/api.py:227</code></pre>
<p>检查image文件是否extend filesystem。检查结果：CoW=True is_image_extendable</p>
<pre><code>2017-07-04 10:39:37.728 7940 INFO nova.virt.libvirt.driver [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] [instance: d63958dc-3510-4291-b219-93183c49d2ca] Creating image
2017-07-04 10:39:37.729 7940 DEBUG oslo_concurrency.processutils [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] Running cmd (subprocess): sudo nova-rootwrap /etc/nova/rootwrap.conf chown 162 /var/lib/nova/instances/d63958dc-3510-4291-b219-93183c49d2ca/disk.config execute /usr/lib/python2.7/site-packages/oslo_concurrency/processutils.py:223
2017-07-04 10:39:37.804 7940 INFO nova.virt.libvirt.driver [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] [instance: d63958dc-3510-4291-b219-93183c49d2ca] Using config drive
2017-07-04 10:39:37.901 7940 INFO nova.virt.libvirt.driver [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] [instance: d63958dc-3510-4291-b219-93183c49d2ca] Creating config drive at /var/lib/nova/instances/d63958dc-3510-4291-b219-93183c49d2ca/disk.config</code></pre>
<p>生成image文件，使用nova-rootwrap，使用root权限修改disk.config文件权限，disk.config配置使用config drive</p>
<pre><code>2017-07-04 10:39:37.924 7940 DEBUG nova.virt.libvirt.driver [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] [instance: d63958dc-3510-4291-b219-93183c49d2ca] Start _get_guest_xml network_info=[VIF(&#123;&#39;profile&#39;: None, &#39;ovs_interfaceid&#39;: u&#39;327e38f0-d108-4240-a053-5c4c4878f88c&#39;, &#39;preserve_on_delete&#39;: False, &#39;network&#39;: Network(&#123;&#39;bridge&#39;: &#39;alubr0&#39;, &#39;subnets&#39;: [Subnet(&#123;&#39;ips&#39;: [FixedIP(&#123;&#39;version&#39;: 4, &#39;vif_mac&#39;: u&#39;fa:16:3e:40:33:dd&#39;, &#39;floating_ips&#39;: [], &#39;label&#39;: u&#39;net001&#39;, &#39;meta&#39;: &#123;&#125;, &#39;address&#39;: u&#39;192.168.2.128&#39;, &#39;type&#39;: &#39;fixed&#39;&#125;)], &#39;version&#39;: 4, &#39;meta&#39;: &#123;&#125;, &#39;dns&#39;: [IP(&#123;&#39;meta&#39;: &#123;&#125;, &#39;version&#39;: 4, &#39;type&#39;: &#39;dns&#39;, &#39;address&#39;: u&#39;8.8.8.8&#39;&#125;)], &#39;routes&#39;: [], &#39;cidr&#39;: u&#39;192.168.2.0/24&#39;, &#39;gateway&#39;: IP(&#123;&#39;meta&#39;: &#123;&#125;, &#39;version&#39;: 4, &#39;type&#39;: &#39;gateway&#39;, &#39;address&#39;: u&#39;192.168.2.1&#39;&#125;)&#125;)], &#39;meta&#39;: &#123;&#39;injected&#39;: False, &#39;tenant_id&#39;: u&#39;23f23d0bed4f4f408ff7d21492254e1d&#39;&#125;, &#39;id&#39;: u&#39;ee98ec6a-e1ed-43eb-9d0a-26080d277484&#39;, &#39;label&#39;: u&#39;net001&#39;&#125;), &#39;devname&#39;: u&#39;tap327e38f0-d1&#39;, &#39;vnic_type&#39;: u&#39;normal&#39;, &#39;qbh_params&#39;: None, &#39;meta&#39;: &#123;&#125;, &#39;details&#39;: &#123;u&#39;port_filter&#39;: False&#125;, &#39;address&#39;: u&#39;fa:16:3e:40:33:dd&#39;, &#39;active&#39;: True, &#39;type&#39;: u&#39;ovs&#39;, &#39;id&#39;: u&#39;327e38f0-d108-4240-a053-5c4c4878f88c&#39;, &#39;qbg_params&#39;: None&#125;)] disk_info=&#123;&#39;disk_bus&#39;: &#39;virtio&#39;, &#39;cdrom_bus&#39;: &#39;ide&#39;, &#39;mapping&#39;: &#123;&#39;disk.config&#39;: &#123;&#39;bus&#39;: &#39;ide&#39;, &#39;type&#39;: &#39;cdrom&#39;, &#39;dev&#39;: &#39;hdd&#39;&#125;, &#39;disk&#39;: &#123;&#39;bus&#39;: &#39;virtio&#39;, &#39;boot_index&#39;: &#39;1&#39;, &#39;type&#39;: &#39;disk&#39;, &#39;dev&#39;: u&#39;vda&#39;&#125;, &#39;root&#39;: &#123;&#39;bus&#39;: &#39;virtio&#39;, &#39;boot_index&#39;: &#39;1&#39;, &#39;type&#39;: &#39;disk&#39;, &#39;dev&#39;: u&#39;vda&#39;&#125;&#125;&#125; image_meta=&#123;u&#39;min_disk&#39;: 40, u&#39;container_format&#39;: u&#39;bare&#39;, u&#39;min_ram&#39;: 0, u&#39;disk_format&#39;: u&#39;qcow2&#39;, u&#39;properties&#39;: &#123;u&#39;image.os_type&#39;: u&#39;linux&#39;, u&#39;hw_qemu_guest_agent&#39;: u&#39;yes&#39;, u&#39;base_image_ref&#39;: u&#39;8aaf1759-9fb4-4ba9-8cff-1743eb824c5f&#39;, u&#39;os_distro&#39;: u&#39;centos&#39;, u&#39;hw_ovirt_guest_agent&#39;: u&#39;yes&#39;&#125;&#125; rescue=None block_device_info=&#123;&#39;block_device_mapping&#39;: [], &#39;swap&#39;: None, &#39;ephemerals&#39;: [], &#39;root_device_name&#39;: u&#39;/dev/vda&#39;&#125; _get_guest_xml /usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py:4547
2017-07-04 10:39:38.140 7940 DEBUG nova.virt.libvirt.vif [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] vif_type=ovs instance=Instance(access_ip_v4=None,access_ip_v6=None,architecture=None,auto_disk_config=False,availability_zone=&#39;nova&#39;,cell_name=None,cleaned=False,config_drive=&#39;True&#39;,created_at=2017-07-04T02:34:42Z,default_ephemeral_device=None,default_swap_device=None,deleted=False,deleted_at=None,disable_terminate=False,display_description=&#39;test&#39;,display_name=&#39;test&#39;,ephemeral_gb=0,ephemeral_key_uuid=None,fault=&lt;?&gt;,flavor=Flavor(9),host=&#39;NFJD-TESTN-COMPUTE-2&#39;,hostname=&#39;test&#39;,id=26717,image_ref=&#39;8aaf1759-9fb4-4ba9-8cff-1743eb824c5f&#39;,info_cache=InstanceInfoCache,instance_type_id=9,kernel_id=&#39;&#39;,key_data=None,key_name=None,launch_index=0,launched_at=2017-07-04T02:35:15Z,launched_on=&#39;NFJD-TESTN-COMPUTE-3&#39;,locked=False,locked_by=None,memory_mb=8192,metadata=&#123;&#125;,new_flavor=Flavor(9),node=&#39;NFJD-TESTN-COMPUTE-2&#39;,numa_topology=None,old_flavor=Flavor(3),os_type=None,pci_devices=PciDeviceList,pci_requests=&lt;?&gt;,power_state=1,progress=0,project_id=&#39;6c149dcd3cf64171b8dd972dd03bbac0&#39;,ramdisk_id=&#39;&#39;,reservation_id=&#39;r-7uedfsof&#39;,root_device_name=&#39;/dev/vda&#39;,root_gb=80,scheduled_at=None,security_groups=SecurityGroupList,shutdown_terminate=False,system_metadata=&#123;image_base_image_ref=&#39;8aaf1759-9fb4-4ba9-8cff-1743eb824c5f&#39;,image_container_format=&#39;bare&#39;,image_disk_format=&#39;qcow2&#39;,image_hw_ovirt_guest_agent=&#39;yes&#39;,image_hw_qemu_guest_agent=&#39;yes&#39;,image_image.os_type=&#39;linux&#39;,image_min_disk=&#39;40&#39;,image_min_ram=&#39;0&#39;,image_os_distro=&#39;centos&#39;,old_vm_state=&#39;active&#39;&#125;,tags=&lt;?&gt;,task_state=&#39;resize_finish&#39;,terminated_at=None,updated_at=2017-07-04T02:38:01Z,user_data=None,user_id=&#39;62f52135115f4898bd0d82c1f0cd632b&#39;,uuid=d63958dc-3510-4291-b219-93183c49d2ca,vcpu_model=VirtCPUModel,vcpus=4,vm_mode=None,vm_state=&#39;active&#39;) vif=VIF(&#123;&#39;profile&#39;: None, &#39;ovs_interfaceid&#39;: u&#39;327e38f0-d108-4240-a053-5c4c4878f88c&#39;, &#39;preserve_on_delete&#39;: False, &#39;network&#39;: Network(&#123;&#39;bridge&#39;: &#39;alubr0&#39;, &#39;subnets&#39;: [Subnet(&#123;&#39;ips&#39;: [FixedIP(&#123;&#39;version&#39;: 4, &#39;vif_mac&#39;: u&#39;fa:16:3e:40:33:dd&#39;, &#39;floating_ips&#39;: [], &#39;label&#39;: u&#39;net001&#39;, &#39;meta&#39;: &#123;&#125;, &#39;address&#39;: u&#39;192.168.2.128&#39;, &#39;type&#39;: &#39;fixed&#39;&#125;)], &#39;version&#39;: 4, &#39;meta&#39;: &#123;&#125;, &#39;dns&#39;: [IP(&#123;&#39;meta&#39;: &#123;&#125;, &#39;version&#39;: 4, &#39;type&#39;: &#39;dns&#39;, &#39;address&#39;: u&#39;8.8.8.8&#39;&#125;)], &#39;routes&#39;: [], &#39;cidr&#39;: u&#39;192.168.2.0/24&#39;, &#39;gateway&#39;: IP(&#123;&#39;meta&#39;: &#123;&#125;, &#39;version&#39;: 4, &#39;type&#39;: &#39;gateway&#39;, &#39;address&#39;: u&#39;192.168.2.1&#39;&#125;)&#125;)], &#39;meta&#39;: &#123;&#39;injected&#39;: False, &#39;tenant_id&#39;: u&#39;23f23d0bed4f4f408ff7d21492254e1d&#39;&#125;, &#39;id&#39;: u&#39;ee98ec6a-e1ed-43eb-9d0a-26080d277484&#39;, &#39;label&#39;: u&#39;net001&#39;&#125;), &#39;devname&#39;: u&#39;tap327e38f0-d1&#39;, &#39;vnic_type&#39;: u&#39;normal&#39;, &#39;qbh_params&#39;: None, &#39;meta&#39;: &#123;&#125;, &#39;details&#39;: &#123;u&#39;port_filter&#39;: False&#125;, &#39;address&#39;: u&#39;fa:16:3e:40:33:dd&#39;, &#39;active&#39;: True, &#39;type&#39;: u&#39;ovs&#39;, &#39;id&#39;: u&#39;327e38f0-d108-4240-a053-5c4c4878f88c&#39;, &#39;qbg_params&#39;: None&#125;) virt_typekvm get_config /usr/lib/python2.7/site-packages/nova/virt/libvirt/vif.py:364
2017-07-04 10:39:38.144 7940 DEBUG nova.virt.libvirt.driver [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] [instance: d63958dc-3510-4291-b219-93183c49d2ca] Qemu guest agent is enabled through image metadata _set_qemu_guest_agent /usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py:4145
2017-07-04 10:39:38.144 7940 DEBUG nova.virt.libvirt.driver [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] [instance: d63958dc-3510-4291-b219-93183c49d2ca] Ovirt guest agent is enabled through image metadata _set_ovirt_guest_agent /usr/lib/python2.7/site-packages/nova/virt/libvirt/driver.py:4161
2017-07-04 10:39:38.147 7940 DEBUG nova.virt.libvirt.config [req-ced45485-770b-4751-a339-58f070c6342b 62f52135115f4898bd0d82c1f0cd632b 6c149dcd3cf64171b8dd972dd03bbac0 - - -] Generated XML (&#39;&lt;domain type=&quot;kvm&quot;&gt;\n  &lt;uuid&gt;d63958dc-3510-4291-b219-93183c49d2ca&lt;/uuid&gt;\n  &lt;name&gt;instance-0000685d&lt;/name&gt;\n  &lt;memory&gt;8388608&lt;/memory&gt;\n  &lt;vcpu&gt;4&lt;/vcpu&gt;\n  &lt;metadata&gt;\n    &lt;nova:instance xmlns:nova=&quot;http://openstack.org/xmlns/libvirt/nova/1.0&quot;&gt;\n      &lt;nova:package version=&quot;2015.1.5-1.el7.centos&quot;/&gt;\n      &lt;nova:name&gt;test&lt;/nova:name&gt;\n      &lt;nova:creationTime&gt;2017-07-04 02:39:38&lt;/nova:creationTime&gt;\n      &lt;nova:flavor name=&quot;m1.large&quot;&gt;\n        &lt;nova:memory&gt;8192&lt;/nova:memory&gt;\n        &lt;nova:disk&gt;80&lt;/nova:disk&gt;\n        &lt;nova:swap&gt;0&lt;/nova:swap&gt;\n        &lt;nova:ephemeral&gt;0&lt;/nova:ephemeral&gt;\n        &lt;nova:vcpus&gt;4&lt;/nova:vcpus&gt;\n      &lt;/nova:flavor&gt;\n      &lt;nova:owner&gt;\n        &lt;nova:user uuid=&quot;62f52135115f4898bd0d82c1f0cd632b&quot;&gt;admin&lt;/nova:user&gt;\n        &lt;nova:project uuid=&quot;6c149dcd3cf64171b8dd972dd03bbac0&quot;&gt;admin&lt;/nova:project&gt;\n      &lt;/nova:owner&gt;\n      &lt;nova:root type=&quot;image&quot; uuid=&quot;8aaf1759-9fb4-4ba9-8cff-1743eb824c5f&quot;/&gt;\n    &lt;/nova:instance&gt;\n  &lt;/metadata&gt;\n  &lt;sysinfo type=&quot;smbios&quot;&gt;\n    &lt;system&gt;\n      &lt;entry name=&quot;manufacturer&quot;&gt;Fedora Project&lt;/entry&gt;\n      &lt;entry name=&quot;product&quot;&gt;OpenStack Nova&lt;/entry&gt;\n      &lt;entry name=&quot;version&quot;&gt;2015.1.5-1.el7.centos&lt;/entry&gt;\n      &lt;entry name=&quot;serial&quot;&gt;604c99de-78ac-4609-b0b9-f6fb62e705c2&lt;/entry&gt;\n      &lt;entry name=&quot;uuid&quot;&gt;d63958dc-3510-4291-b219-93183c49d2ca&lt;/entry&gt;\n    &lt;/system&gt;\n  &lt;/sysinfo&gt;\n  &lt;os&gt;\n    &lt;type&gt;hvm&lt;/type&gt;\n    &lt;boot dev=&quot;hd&quot;/&gt;\n    &lt;smbios mode=&quot;sysinfo&quot;/&gt;\n  &lt;/os&gt;\n  &lt;features&gt;\n    &lt;acpi/&gt;\n    &lt;apic/&gt;\n  &lt;/features&gt;\n  &lt;cputune&gt;\n    &lt;shares&gt;4096&lt;/shares&gt;\n  &lt;/cputune&gt;\n  &lt;clock offset=&quot;utc&quot;&gt;\n    &lt;timer name=&quot;pit&quot; tickpolicy=&quot;delay&quot;/&gt;\n    &lt;timer name=&quot;rtc&quot; tickpolicy=&quot;catchup&quot;/&gt;\n    &lt;timer name=&quot;hpet&quot; present=&quot;no&quot;/&gt;\n  &lt;/clock&gt;\n  &lt;cpu mode=&quot;host-model&quot; match=&quot;exact&quot;&gt;\n    &lt;topology sockets=&quot;4&quot; cores=&quot;1&quot; threads=&quot;1&quot;/&gt;\n  &lt;/cpu&gt;\n  &lt;devices&gt;\n    &lt;disk type=&quot;file&quot; device=&quot;disk&quot;&gt;\n      &lt;driver name=&quot;qemu&quot; type=&quot;qcow2&quot; cache=&quot;directsync&quot;/&gt;\n      &lt;source file=&quot;/var/lib/nova/instances/d63958dc-3510-4291-b219-93183c49d2ca/disk&quot;/&gt;\n      &lt;target bus=&quot;virtio&quot; dev=&quot;vda&quot;/&gt;\n    &lt;/disk&gt;\n    &lt;disk type=&quot;file&quot; device=&quot;cdrom&quot;&gt;\n      &lt;driver name=&quot;qemu&quot; type=&quot;raw&quot; cache=&quot;directsync&quot;/&gt;\n      &lt;source file=&quot;/var/lib/nova/instances/d63958dc-3510-4291-b219-93183c49d2ca/disk.config&quot;/&gt;\n      &lt;target bus=&quot;ide&quot; dev=&quot;hdd&quot;/&gt;\n    &lt;/disk&gt;\n    &lt;interface type=&quot;bridge&quot;&gt;\n      &lt;mac address=&quot;fa:16:3e:40:33:dd&quot;/&gt;\n      &lt;model type=&quot;virtio&quot;/&gt;\n      &lt;source bridge=&quot;alubr0&quot;/&gt;\n      &lt;target dev=&quot;tap327e38f0-d1&quot;/&gt;\n      &lt;virtualport type=&quot;openvswitch&quot;&gt;\n        &lt;parameters interfaceid=&quot;327e38f0-d108-4240-a053-5c4c4878f88c&quot;/&gt;\n      &lt;/virtualport&gt;\n    &lt;/interface&gt;\n    &lt;serial type=&quot;file&quot;&gt;\n      &lt;source path=&quot;/var/lib/nova/instances/d63958dc-3510-4291-b219-93183c49d2ca/console.log&quot;/&gt;\n    &lt;/serial&gt;\n    &lt;serial type=&quot;pty&quot;/&gt;\n    &lt;input type=&quot;tablet&quot; bus=&quot;usb&quot;/&gt;\n    &lt;graphics type=&quot;vnc&quot; autoport=&quot;yes&quot; keymap=&quot;en-us&quot; listen=&quot;0.0.0.0&quot;/&gt;\n    &lt;video&gt;\n      &lt;model type=&quot;cirrus&quot;/&gt;\n    &lt;/video&gt;\n    &lt;channel type=&quot;unix&quot;&gt;\n      &lt;source mode=&quot;bind&quot; path=&quot;/var/lib/libvirt/qemu/org.qemu.guest_agent.0.instance-0000685d.sock&quot;/&gt;\n      &lt;target type=&quot;virtio&quot; name=&quot;org.qemu.guest_agent.0&quot;/&gt;\n    &lt;/channel&gt;\n    &lt;channel type=&quot;unix&quot;&gt;\n      &lt;source mode=&quot;bind&quot; path=&quot;/var/lib/libvirt/qemu/com.redhat.rhevm.vdsm.instance-0000685d.sock&quot;/&gt;\n      &lt;target type=&quot;virtio&quot; name=&quot;com.redhat.rhevm.vdsm&quot;/&gt;\n    &lt;/channel&gt;\n    &lt;channel type=&quot;unix&quot;&gt;\n      &lt;source mode=&quot;bind&quot; path=&quot;/var/lib/libvirt/qemu/com.redhat.rhevm.vdsm.0.instance-0000685d.sock&quot;/&gt;\n      &lt;target type=&quot;virtio&quot; name=&quot;com.redhat.rhevm.vdsm.0&quot;/&gt;\n    &lt;/channel&gt;\n    &lt;memballoon model=&quot;virtio&quot;&gt;\n      &lt;stats period=&quot;10&quot;/&gt;\n    &lt;/memballoon&gt;\n  &lt;/devices&gt;\n&lt;/domain&gt;\n&#39;,)  to_xml /usr/lib/python2.7/site-packages/nova/virt/libvirt/config.py:82</code></pre>
<p>生成vm boot所需要的xml文件</p>
<pre><code>2017-07-04 10:39:39.224 7940 DEBUG nova.virt.driver [req-13fbc44e-ff27-43a1-bedc-6c40889619ce - - - - -] Emitting event &lt;LifecycleEvent: 1499135979.22, d63958dc-3510-4291-b219-93183c49d2ca =&gt; Resumed&gt; emit_event /usr/lib/python2.7/site-packages/nova/virt/driver.py:1309
2017-07-04 10:39:39.226 7940 INFO nova.compute.manager [req-13fbc44e-ff27-43a1-bedc-6c40889619ce - - - - -] [instance: d63958dc-3510-4291-b219-93183c49d2ca] VM Resumed (Lifecycle Event)
2017-07-04 10:39:39.230 7940 INFO nova.virt.libvirt.driver [-] [instance: d63958dc-3510-4291-b219-93183c49d2ca] Instance running successfully.
2017-07-04 10:39:39.297 7940 DEBUG nova.compute.manager [req-13fbc44e-ff27-43a1-bedc-6c40889619ce - - - - -] [instance: d63958dc-3510-4291-b219-93183c49d2ca] Synchronizing instance power state after lifecycle event &quot;Resumed&quot;; current vm_state: active, current task_state: resize_finish, current DB power_state: 1, VM power_state: 1 handle_lifecycle_event /usr/lib/python2.7/site-packages/nova/compute/manager.py:1274
2017-07-04 10:39:39.361 7940 INFO nova.compute.manager [req-13fbc44e-ff27-43a1-bedc-6c40889619ce - - - - -] [instance: d63958dc-3510-4291-b219-93183c49d2ca] During sync_power_state the instance has a pending task (resize_finish). Skip.
2017-07-04 10:39:39.362 7940 DEBUG nova.virt.driver [req-13fbc44e-ff27-43a1-bedc-6c40889619ce - - - - -] Emitting event &lt;LifecycleEvent: 1499135979.23, d63958dc-3510-4291-b219-93183c49d2ca =&gt; Started&gt; emit_event /usr/lib/python2.7/site-packages/nova/virt/driver.py:1309
2017-07-04 10:39:39.363 7940 INFO nova.compute.manager [req-13fbc44e-ff27-43a1-bedc-6c40889619ce - - - - -] [instance: d63958dc-3510-4291-b219-93183c49d2ca] VM Started (Lifecycle Event)
2017-07-04 10:39:39.425 7940 DEBUG nova.compute.manager [req-13fbc44e-ff27-43a1-bedc-6c40889619ce - - - - -] [instance: d63958dc-3510-4291-b219-93183c49d2ca] Synchronizing instance power state after lifecycle event &quot;Started&quot;; current vm_state: resized, current task_state: None, current DB power_state: 1, VM power_state: 1 handle_lifecycle_event /usr/lib/python2.7/site-packages/nova/compute/manager.py:1274</code></pre>
<p>启动vm，更新vm所处的生命周期</p>
<h1 id="若resize前的vm为关机状态，resize操作不会在resize之后自动开机"><a href="#若resize前的vm为关机状态，resize操作不会在resize之后自动开机" class="headerlink" title="若resize前的vm为关机状态，resize操作不会在resize之后自动开机"></a>若resize前的vm为关机状态，resize操作不会在resize之后自动开机</h1><p>nova/compute/manager.py</p>
<pre class="language-python" data-language="python"><code class="language-python"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token comment"># NOTE(mriedem): If the original vm_state was STOPPED, we don't</span>
        <span class="token comment"># automatically power on the instance after it's migrated</span>
        power_on <span class="token operator">=</span> old_vm_state <span class="token operator">!=</span> vm_states<span class="token punctuation">.</span>STOPPED

        <span class="token keyword">try</span><span class="token punctuation">:</span> 
            self<span class="token punctuation">.</span>driver<span class="token punctuation">.</span>finish_migration<span class="token punctuation">(</span>context<span class="token punctuation">,</span> migration<span class="token punctuation">,</span> instance<span class="token punctuation">,</span>
                                         disk_info<span class="token punctuation">,</span>
                                         network_info<span class="token punctuation">,</span>
                                         image_meta<span class="token punctuation">,</span> resize_instance<span class="token punctuation">,</span>
                                         block_device_info<span class="token punctuation">,</span> power_on<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></code></pre>


      
       <hr><span style="font-style: italic;color: gray;"> 转载请注明来源，欢迎指出任何有错误或不够清晰的表达。可以邮件至 backendcloud@gmail.com </span>
    </div>
</article>







    




    </div>
    <div class="copyright">
        <div class="wechat_OA">
	<span>欢迎您扫一扫下面的微信公众号对"后端云"进行订阅！</span>
	<br>
    <!-- 这里添加你的二维码图片 -->
	<img src ="/img/wechat-dingyuehao.jpg">
</div>

<p class="footer-entry"><span class="miit">
                <img src="/img/gov.png" title="中华人民共和国工业和信息化部">
                <a target="_blank" rel="noopener" href="http://beian.miit.gov.cn/">苏ICP备15031601-2号</a>
        </span>
    
    ©2017-2022 后端云
</p>

    </div>
    <div class="full-toc">
        <button class="full" data-title="切换全屏 快捷键 s"><span class="min "></span></button>
<a class="" id="rocket" ></a>

    </div>
</div>

</body>
<script src="/js/jquery.pjax.js?v=1.1.0" ></script>

<script src="/js/script.js?v=1.1.0" ></script>
<script>
    var img_resize = 'default';
    function initArticle() {
        /*渲染对应的表格样式*/
        
            $("#post .pjax table").addClass("green_title");
        

        /*渲染打赏样式*/
        

        /*高亮代码块行号*/
        

        /*访问数量*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*代码高亮，行号对齐*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*打赏页面隐藏与展示*/
    

</script>

<!--加入行号的高亮代码块样式-->

<!--自定义样式设置-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 492px;
        }
        .nav.fullscreen {
            margin-left: -492px;
        }
        .nav-left {
            width: 100px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 492px;
            margin-left: -492px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    

    /*列表样式*/
    

    /* 背景图样式 */
    
    


    /*引用块样式*/
    

    /*文章列表背景图*/
    

    
</style>







</html>
